{"mappings":"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","sources":["website/src/js/customer/controller.js","website/src/js/customer/views/carsView.js"],"sourcesContent":["\"use strict\";\r\n\r\nimport \"core-js/stable\"; // polyfill everything\r\nimport \"regenerator-runtime/runtime\"; // polyfill async/await\r\nimport * as model from \"../model.js\";\r\nimport filterView from \"../filtersView.js\";\r\nimport carsView from \"./views/carsView.js\";\r\n\r\nconst container = document.querySelector(\".app-container\");\r\nconst payContainer = document.querySelector(\".payment-container\");\r\nconst info = document.querySelector(\"#car-info\");\r\nconst alert = document.querySelector(\".alert\");\r\nconst pick = document.querySelector(\"#pickup-date\");\r\nconst drop = document.querySelector(\"#drop-off-date\");\r\nconst d = new Date();\r\nconst t = new Date();\r\nt.setDate(d.getDate() + 1);\r\n// prettier-ignore\r\nconst today = `${d.getFullYear()}-${`${d.getMonth() + 1}`.padStart(2,\"0\")}-${`${d.getDate()}`.padStart(2, \"0\")}`;\r\n// prettier-ignore\r\nconst tommorow = `${t.getFullYear()}-${`${t.getMonth() + 1}`.padStart(2,\"0\")}-${`${t.getDate()}`.padStart(2, \"0\")}`;\r\nconst maxDuration = new Date();\r\nmaxDuration.setDate(d.getDate() + 30);\r\n\r\n//prettier-ignore\r\nconst max = `${maxDuration.getFullYear()}-${`${maxDuration.getMonth() + 1}`.padStart(2,\"0\")}-${`${maxDuration.getDate()}`.padStart(2,\"0\")}`;\r\n\r\nlet confirm;\r\n\r\nlet active = \"home\",\r\n  filtered,\r\n  activeCar;\r\n\r\nconst init = async () => {\r\n  const countries = await model.getCountries();\r\n  filterView.initUI(countries);\r\n  const name = await model.getData();\r\n\r\n  document.querySelector(\".welcome\").textContent = `Welcome back, ${\r\n    name[0].toUpperCase() + name.slice(1).toLowerCase()\r\n  }!`;\r\n\r\n  carsView.render(model.state.cars, model.state.favourites);\r\n  carsView.handle();\r\n  addFilters();\r\n\r\n  document.querySelector(\".btn-apply\").addEventListener(\"click\", filter.bind());\r\n  document.querySelector(\".btn-reset\").addEventListener(\"click\", reset.bind());\r\n\r\n  document\r\n    .querySelectorAll(\".btn-nav\")\r\n    .forEach((btn) => btn.addEventListener(\"click\", navHandler.bind(btn)));\r\n\r\n  document\r\n    .querySelector(\".btn-submit-pay\")\r\n    .addEventListener(\"click\", paymentHandler.bind(null));\r\n\r\n  document\r\n    .querySelector(\".btn-signout\")\r\n    .addEventListener(\"click\", model.signOut.bind(null));\r\n\r\n  pick.min = today;\r\n  drop.min = today;\r\n  drop.max = today;\r\n  pick.max = max;\r\n\r\n  pick.addEventListener(\"input\", () => {\r\n    drop.min = pick.value;\r\n    const date = new Date(pick.value);\r\n    date.setDate(date.getDate() + 45);\r\n\r\n    //prettier-ignore\r\n    const max = `${date.getFullYear()}-${`${date.getMonth() + 1}`.padStart(2,\"0\")}-${`${date.getDate()}`.padStart(2,\"0\")}`;\r\n\r\n    drop.max = max;\r\n  });\r\n\r\n  handleView();\r\n  handleForm();\r\n};\r\n\r\nconst handleForm = function () {\r\n  const form = document.querySelector(\".action-form\");\r\n\r\n  form.addEventListener(\"submit\", async (e) => {\r\n    e.preventDefault();\r\n\r\n    const flag = form.checkValidity();\r\n\r\n    form.classList.add(\"was-validated\");\r\n\r\n    if (!flag) {\r\n      e.stopPropagation();\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData(form);\r\n\r\n    const reserveData = {};\r\n\r\n    [...formData.entries()].forEach(\r\n      (entry) => (reserveData[entry[0]] = entry[1])\r\n    );\r\n    reserveData.car_id = activeCar.car_id;\r\n\r\n    info.classList.add(\"z-n\");\r\n    showConfirmation(\r\n      \"confirm reservation\",\r\n      \"Do you want to confirm reserving this car?\",\r\n      \"confirm\"\r\n    );\r\n\r\n    let res = await confirm.then((ev) => true).catch(() => false);\r\n\r\n    if (res) {\r\n      reserveHandler(reserveData);\r\n      form.querySelector(\"#pickup-date\").value =\r\n        form.querySelector(\"#pickup-location\").value =\r\n        form.querySelector(\"#drop-off-date\").value =\r\n        form.querySelector(\"#drop-off-location\").value =\r\n          \"\";\r\n\r\n      form.classList.remove(\"was-validated\");\r\n      $(\"#car-info\").modal(\"hide\");\r\n\r\n      pick.min = today;\r\n      drop.min = today;\r\n      drop.max = today;\r\n      pick.max = max;\r\n    }\r\n    info.classList.remove(\"z-n\");\r\n  });\r\n};\r\n\r\nconst showConfirmation = function (title, message, action) {\r\n  const modal = document.querySelector(\"#confirm-modal\");\r\n  modal.querySelector(\".modal-title\").textContent = title;\r\n  modal.querySelector(\".modal-body\").textContent = message;\r\n  document.querySelector(\".confirm\").innerHTML = \"\";\r\n  document.querySelector(\".confirm\").insertAdjacentHTML(\r\n    \"afterbegin\",\r\n    ` <button\r\n              type=\"button\"\r\n              id=\"cancel\"\r\n              class=\"btn btn-outline-primary cancel\"\r\n              data-bs-dismiss=\"modal\"\r\n              data-action=\"\"\r\n            >\r\n              Cancel\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              id=\"confirm\"\r\n              class=\"btn btn-primary\"\r\n              data-action=\"\"\r\n              data-bs-dismiss=\"modal\"\r\n            >\r\n              Save changes\r\n            </button>`\r\n  );\r\n\r\n  document.querySelector(\"#confirm\").textContent = action;\r\n\r\n  confirm = new Promise((resolve, reject) => {\r\n    document.querySelector(\"#confirm\").addEventListener(\"click\", resolve);\r\n    document.querySelector(\"#cancel\").addEventListener(\"click\", reject);\r\n    document.querySelector(\"#close-confirm\").addEventListener(\"click\", reject);\r\n  });\r\n\r\n  document.querySelector(\"#close-confirm\").addEventListener(\"click\", () => {\r\n    $(\"#confirm-modal\").modal(\"toggle\");\r\n  });\r\n\r\n  $(\"#confirm-modal\").modal(\"show\");\r\n};\r\n\r\nconst showAlert = function (message, flag = true) {\r\n  alert.textContent = message;\r\n  alert.classList.toggle(\"alert-hide\");\r\n  alert.classList.toggle(`${flag ? \"alert-success\" : \"alert-danger\"}`);\r\n\r\n  setTimeout(() => {\r\n    alert.classList.toggle(\"alert-hide\");\r\n    alert.classList.toggle(`${flag ? \"alert-success\" : \"alert-danger\"}`);\r\n    alert.textContent = \"\";\r\n  }, 3000);\r\n};\r\n\r\nconst handleView = function () {\r\n  document.querySelectorAll(\".btn-view\").forEach((btn) => {\r\n    const id = btn.closest(\".card\").dataset.carId;\r\n    const order = btn.dataset.resId;\r\n\r\n    btn.addEventListener(\"click\", () => {\r\n      document.querySelector(\"#action\").classList.add(\"hide\");\r\n\r\n      carsView.setModal();\r\n\r\n      activeCar = getActiveData().filter((c) => c.car_id === id)[0];\r\n\r\n      carsView.renderCarView(activeCar, active);\r\n\r\n      if (active === \"home\" || active === \"favourites\") {\r\n        if (activeCar.status === \"active\") {\r\n          const form = document.querySelector(\"#action\");\r\n          form.classList.remove(\"hide\");\r\n          form.querySelector(\"#pickup-date\").value =\r\n            form.querySelector(\"#pickup-location\").value =\r\n            form.querySelector(\"#drop-off-date\").value =\r\n            form.querySelector(\"#drop-off-location\").value =\r\n              \"\";\r\n          pick.min = today;\r\n          drop.min = today;\r\n          drop.max = today;\r\n          pick.max = max;\r\n\r\n          form.classList.remove(\"was-validated\");\r\n        }\r\n\r\n        document\r\n          .querySelector(\".btn-reserve\")\r\n          .addEventListener(\"click\", async () => {\r\n            let brand = activeCar.brand;\r\n            brand = brand\r\n              .split(\" \")\r\n              .map(\r\n                (word) => word[0].toUpperCase() + word.slice(1).toLowerCase()\r\n              )\r\n              .join(\" \");\r\n          });\r\n      }\r\n\r\n      if (active === \"reserved\") {\r\n        document\r\n          .querySelector(\".btn-pick-up\")\r\n          .addEventListener(\"click\", pickHandler.bind(null, id));\r\n\r\n        document\r\n          .querySelector(\".btn-revoke\")\r\n          .addEventListener(\"click\", revokeHandler.bind(null, id, order));\r\n      }\r\n\r\n      if (active === \"rented\") {\r\n        document\r\n          .querySelector(\".btn-return\")\r\n          .addEventListener(\"click\", returnHandler.bind(null, id, order));\r\n      }\r\n    });\r\n  });\r\n};\r\n\r\nconst addFilters = () => {\r\n  model.state.filters.forEach((filter) => {\r\n    filterView.renderFilter(filter);\r\n  });\r\n\r\n  filterView.addFiltersHandler();\r\n};\r\n\r\nexport const favouriteHandler = async function () {\r\n  const btn = this.querySelector(\".fav-inner\");\r\n  btn.classList.toggle(\"fav-active\");\r\n  const id = this.closest(\".card\").dataset.carId;\r\n\r\n  if (btn.classList.contains(\"fav-active\")) {\r\n    const res = await model.addFavorite(id);\r\n    if (res[0]) showAlert(res[1]);\r\n    else showAlert(res[1], false);\r\n  } else {\r\n    const res = await model.removeFavorite(id);\r\n    if (res[0]) showAlert(res[1]);\r\n    else showAlert(res[1], false);\r\n  }\r\n\r\n  if (active === \"favourites\") {\r\n    carsView.render(model.state.favourites, model.state.favourites);\r\n    carsView.handle();\r\n  }\r\n};\r\n\r\nconst getActiveData = () => {\r\n  if (active === \"favourites\") return model.state.favourites;\r\n  if (active === \"reserved\") return model.state.reserved;\r\n  if (active === \"rented\") return model.state.rented;\r\n  return model.state.cars;\r\n};\r\n\r\nconst filter = function () {\r\n  let result = [];\r\n  let flag = false;\r\n  const data = getActiveData();\r\n\r\n  Object.entries(model.state.userFilters).forEach((filter) => {\r\n    const queryRes = [];\r\n    if (filter[0] === \"seating\" && filter[1] > 1) {\r\n      queryRes.push(...data.filter((car) => car.seating === filter[1]));\r\n\r\n      if (flag) result = result.filter((value) => queryRes.includes(value));\r\n      else result.push(...queryRes);\r\n\r\n      flag = true;\r\n      return;\r\n    }\r\n\r\n    if (filter[0] === \"region\" && filter[1] && filter[1] != \"-\") {\r\n      queryRes.push(\r\n        ...data.filter((car) => car.cca2 === filter[1].toUpperCase())\r\n      );\r\n\r\n      if (flag) result = result.filter((value) => queryRes.includes(value));\r\n      else result.push(...queryRes);\r\n\r\n      flag = true;\r\n      return;\r\n    }\r\n\r\n    if (filter[0] === \"range\" && filter[1].length > 0) {\r\n      const min = filter[1][0];\r\n      const max = filter[1][1];\r\n\r\n      queryRes.push(\r\n        ...data.filter((car) => +car.rate >= min && +car.rate <= max)\r\n      );\r\n\r\n      if (filter[0] === \"year\" && filter[1] > 0) {\r\n        queryRes.push(...data.filter((car) => car.year === filter[1]));\r\n\r\n        if (flag) result = result.filter((value) => queryRes.includes(value));\r\n        else result.push(...queryRes);\r\n\r\n        flag = true;\r\n        return;\r\n      }\r\n\r\n      if (flag) result = result.filter((value) => queryRes.includes(value));\r\n      else result.push(...queryRes);\r\n\r\n      flag = true;\r\n      return;\r\n    }\r\n\r\n    const opts = filter[1];\r\n    if (opts.length > 0) {\r\n      opts.forEach((opt) => {\r\n        queryRes.push(...data.filter((car) => car[filter[0]] === opt));\r\n      });\r\n\r\n      if (flag) result = result.filter((value) => queryRes.includes(value));\r\n      else result.push(...queryRes);\r\n\r\n      flag = true;\r\n    }\r\n  });\r\n\r\n  if (!flag)\r\n    carsView.render(data, model.state.favourites, active === \"favourites\");\r\n  else carsView.render(result, model.state.favourites, active === \"favourites\");\r\n  carsView.handle();\r\n  handleView();\r\n  if (result.length > 0) showAlert(\"Showing filter results\");\r\n  else showAlert(\"No data found\", false);\r\n\r\n  filtered = true;\r\n};\r\n\r\nconst reset = function () {\r\n  filterView.reset();\r\n\r\n  model.state.userFilters = {\r\n    type: [],\r\n    transmission: [],\r\n    brand: [],\r\n    powertrain: [],\r\n    color: [],\r\n    seating: 1,\r\n    region: \"\",\r\n    range: [],\r\n    year: 0,\r\n  };\r\n\r\n  document.querySelectorAll(\".open\").forEach((btn) => {\r\n    btn.closest(\".btn-filter\").ariaExpanded = false;\r\n    btn.closest(\".filter\").querySelector(\".show\").classList.remove(\"show\");\r\n    btn.classList.remove(\"open\");\r\n    btn\r\n      .closest(\".btn-filter\")\r\n      .querySelector(\".rotate\")\r\n      .classList.remove(\"rotate\");\r\n  });\r\n\r\n  filtered = false;\r\n  renderState();\r\n  handleView();\r\n};\r\n\r\nconst renderState = function () {\r\n  carsView.clearModal();\r\n  carsView.render(\r\n    getActiveData(),\r\n    model.state.favourites,\r\n    active === \"favourites\"\r\n  );\r\n  carsView.handle();\r\n  handleView();\r\n\r\n  if (filtered) filter();\r\n};\r\n\r\nconst navHandler = function (e) {\r\n  e.preventDefault();\r\n\r\n  const action = this.dataset.action;\r\n  active = action;\r\n\r\n  if (active === \"payment\") {\r\n    container.classList.add(\"hide\");\r\n    if (payContainer.classList.contains(\"hide\"))\r\n      payContainer.classList.remove(\"hide\");\r\n    toggleActive.call(this);\r\n    renderPayments();\r\n    return;\r\n  }\r\n\r\n  if (container.classList.contains(\"hide\")) container.classList.remove(\"hide\");\r\n  payContainer.classList.add(\"hide\");\r\n\r\n  toggleActive.call(this);\r\n  renderState();\r\n};\r\n\r\nconst toggleActive = function () {\r\n  document.querySelector(\".active\").classList.remove(\"active\");\r\n  this.classList.add(\"active\");\r\n};\r\n\r\nconst renderPayments = async function () {\r\n  await model.getPayments();\r\n  if (!model.state.payments) return;\r\n\r\n  carsView.renderPayments(model.state.payments);\r\n\r\n  payContainer.querySelectorAll(\".btn-pay\").forEach((btn) => {\r\n    const pay = btn.closest(\".payment\");\r\n    const order = pay.dataset.orderId;\r\n    const car = pay.dataset.carId;\r\n\r\n    btn.addEventListener(\"click\", () =>\r\n      document\r\n        .querySelector(\".btn-submit-pay\")\r\n        .addEventListener(\"click\", paymentHandler.bind(null, order, car))\r\n    );\r\n  });\r\n};\r\n\r\nconst paymentHandler = async function (order, car) {\r\n  const method = document.querySelector(\"#credit-card\").checked\r\n    ? \"credit card\"\r\n    : \"cash\";\r\n\r\n  document.querySelector(\"#pay\").classList.add(\"z-n\");\r\n  showConfirmation(\r\n    \"confirm payment\",\r\n    `Do you want to confirm paying for this order by ${method}?`,\r\n    \"confirm\"\r\n  );\r\n\r\n  let res = await confirm.then((ev) => true).catch((e) => false);\r\n  if (res) {\r\n    res = await model.makePayment(order, car, method);\r\n    if (res[0]) {\r\n      showAlert(res[1]);\r\n      $(\"#pay\").modal(\"hide\");\r\n      renderPayments();\r\n    } else showAlert(res[1], false);\r\n  }\r\n  document.querySelector(\"#pay\").classList.remove(\"z-n\");\r\n};\r\n\r\nconst pickHandler = async function (id) {\r\n  info.classList.add(\"z-n\");\r\n  showConfirmation(\r\n    \"confirm pick\",\r\n    \"Do you want to confirm picking this car?\",\r\n    \"confirm\"\r\n  );\r\n\r\n  let res = await confirm.then((ev) => true).catch((e) => false);\r\n  if (res) {\r\n    res = await model.pickCar(id);\r\n    $(\"#car-info\").modal(\"hide\");\r\n    if (res[0]) showAlert(res[1]);\r\n    else showAlert(res[1], false);\r\n\r\n    renderState();\r\n  }\r\n  info.classList.remove(\"z-n\");\r\n};\r\n\r\nconst revokeHandler = async function (id, order) {\r\n  info.classList.add(\"z-n\");\r\n  showConfirmation(\r\n    \"confirm revoke\",\r\n    \"Do you want to confirm revoking this car?\",\r\n    \"confirm\"\r\n  );\r\n  let res = await confirm.then((ev) => true).catch((e) => false);\r\n  if (res) {\r\n    res = await model.revokeCar(id, order);\r\n    $(\"#car-info\").modal(\"hide\");\r\n    if (res[0]) showAlert(res[1]);\r\n    else showAlert(res[1], false);\r\n    renderState();\r\n  }\r\n  info.classList.remove(\"z-n\");\r\n};\r\n\r\nconst reserveHandler = async function (info) {\r\n  let res = await model.reserveCar(info, active === \"favourites\");\r\n  $(\"#car-info\").modal(\"hide\");\r\n  if (res[0]) showAlert(res[1]);\r\n  else showAlert(res[1], false);\r\n\r\n  renderState();\r\n};\r\n\r\nconst returnHandler = async function (id, order) {\r\n  info.classList.add(\"z-n\");\r\n  showConfirmation(\r\n    \"confirm return\",\r\n    \"Do you want to confirm returning this car?\",\r\n    \"confirm\"\r\n  );\r\n\r\n  let res = await confirm.then((ev) => true).catch((e) => false);\r\n\r\n  if (res) {\r\n    res = await model.returnCar(id, order);\r\n    $(\"#car-info\").modal(\"hide\");\r\n    if (res[0]) showAlert(res[1]);\r\n    else showAlert(res[1], false);\r\n    renderState();\r\n  }\r\n  info.classList.remove(\"z-n\");\r\n};\r\n\r\ndocument.querySelector(\"footer\").innerHTML = `\r\n      Copyrights &copy; ${new Date().getFullYear()} Amr Yasser, Marwan Khaled, and Begad Wael\r\n`;\r\n\r\ninit();\r\n","\"use strict\";\r\n\r\nimport { favouriteHandler } from \"../controller.js\";\r\n\r\nclass CarsView {\r\n  #cars = document.querySelector(\".cars\");\r\n  #viewTitle = document.querySelector(\".view-title\");\r\n  #infoContainer = document.querySelector(\".car-info\");\r\n  #footerContainer = document.querySelector(\".view-footer\");\r\n  #carouselContainer = document.querySelector(\".carousel-inner\");\r\n  #error = document.querySelector(\".error-message\");\r\n  #message = this.#error.querySelector(\".message\");\r\n  payContainer = document.querySelector(\".payment-container\");\r\n\r\n  modal = false;\r\n  openCard;\r\n\r\n  #renderError = function () {\r\n    this.#error.classList.remove(\"hide\");\r\n    this.#message.textContent = \"no cars found\";\r\n  };\r\n\r\n  #hideError() {\r\n    this.#error.classList.add(\"hide\");\r\n  }\r\n\r\n  #clearActive = (active) => {\r\n    active.querySelector(\".card-img-top\").classList.remove(\"img-active\");\r\n    active.querySelector(\".btn-view\").classList.add(\"hidden\");\r\n    active.classList.remove(\"card-active\");\r\n  };\r\n\r\n  #toggleCard = function (container) {\r\n    if (this.modal) return;\r\n\r\n    const card = container.querySelector(\".card\");\r\n    const active = document.querySelector(\".card-active\");\r\n\r\n    card.querySelector(\".card-img-top\").classList.toggle(\"img-active\");\r\n    card.querySelector(\".btn-view\").classList.toggle(\"hidden\");\r\n    card.classList.toggle(\"card-active\");\r\n\r\n    if (active && active !== card) this.#clearActive(active);\r\n  };\r\n\r\n  setModal() {\r\n    this.modal = true;\r\n  }\r\n\r\n  clearModal() {\r\n    this.modal = false;\r\n  }\r\n\r\n  #closeModal() {\r\n    this.modal = false;\r\n\r\n    const card = document.querySelector(\".card-active\");\r\n\r\n    if (!card) return;\r\n    card.querySelector(\".card-img-top\").classList.toggle(\"img-active\");\r\n    card.querySelector(\".btn-view\").classList.toggle(\"hidden\");\r\n    card.classList.toggle(\"card-active\");\r\n  }\r\n\r\n  handle() {\r\n    [...document.querySelectorAll(\".card-container\")].forEach((card) => {\r\n      card.addEventListener(\"mouseover\", this.#toggleCard.bind(this, card));\r\n      card.addEventListener(\"mouseout\", this.#toggleCard.bind(this, card));\r\n    });\r\n\r\n    document.querySelectorAll(\".btn-fav\").forEach((btn) => {\r\n      btn.addEventListener(\"click\", favouriteHandler.bind(btn));\r\n    });\r\n\r\n    document\r\n      .querySelectorAll(\".btn-close-modal\")\r\n      .forEach((btn) =>\r\n        btn.addEventListener(\"click\", this.#closeModal.bind(this))\r\n      );\r\n  }\r\n\r\n  render(data, favs, favFlag = false) {\r\n    const frag = document.createDocumentFragment();\r\n    this.#hideError();\r\n    this.#cars.innerHTML = \"\";\r\n\r\n    if (data.length > 0) {\r\n      data.forEach((car) => {\r\n        const div = document.createElement(\"div\");\r\n        div.classList = \"card-container\";\r\n        div.insertAdjacentHTML(\r\n          \"afterbegin\",\r\n          this.#generateHTML(\r\n            car,\r\n            favs.some((fCar) => fCar.car_id === car.car_id),\r\n            favFlag\r\n          )\r\n        );\r\n        frag.appendChild(div);\r\n      });\r\n      this.#cars.appendChild(frag);\r\n    } else {\r\n      this.#renderError();\r\n    }\r\n\r\n    document\r\n      .querySelectorAll('[data-bs-toggle=\"tooltip\"]')\r\n      .forEach((tooltip) => {\r\n        new bootstrap.Tooltip(tooltip);\r\n      });\r\n  }\r\n\r\n  #generateHTML(car, flag, favFlag) {\r\n    let brand = car.brand;\r\n    brand = brand\r\n      .split(\" \")\r\n      .map((word) => word[0].toUpperCase() + word.slice(1).toLowerCase())\r\n      .join(\" \");\r\n\r\n    if (brand.length < 4) brand = brand.toUpperCase();\r\n\r\n    let btn =\r\n      favFlag &&\r\n      (car.status === \"rented\"\r\n        ? \"rented\"\r\n        : car.status === \"reserved\"\r\n        ? \"reserved\"\r\n        : car.status === \"oos\"\r\n        ? \"out of service\"\r\n        : \"\");\r\n\r\n    if (!btn) btn = \"view\";\r\n\r\n    //prettier-ignore\r\n    return `\r\n        <div class = \"card\" data-car-id =\"${car.car_id}\" data-region=\"${car.region}\">\r\n            <div class=\"card-header\">\r\n              <h3 class=\"car-brand\">${brand} ${car.model.toUpperCase()}</h3>\r\n              <button class=\"btn-fav\">\r\n                <ion-icon class =\"fav-icon fav-outer\" name=\"heart-outline\">\r\n                </ion-icon>\r\n                <ion-icon class =\"fav-icon fav-inner ${\r\n                  flag ? \"fav-active\" : \"\"\r\n                }\" name=\"heart\"></ion-icon>\r\n              </button>\r\n\r\n              <span class=\"car-type\">${ car.type.length <4?car.type.toUpperCase():\r\n                car.type[0].toUpperCase() + car.type.slice(1).toLowerCase()\r\n              }</span>\r\n            </div>\r\n\r\n            <div class=\"img-container mx-auto mb-3\">\r\n              <img\r\n                src=\"https://cdn.imagin.studio/getImage?customer=egalexu&target=make&make=${car.brand}&modelFamily=${car.model}&modelYear=${car.year}&paintId=imagin-${car.color}\"\r\n                class=\"card-img-top \"\r\n                alt=\"${car.brand} car photo\"\r\n              />\r\n            </div>\r\n\r\n            <div class=\"card-body mx-2\">\r\n              <div class=\"seating-label\">\r\n                <ion-icon class=\"car-icon\" name=\"person\"></ion-icon>\r\n                <span class=\"car-seating\">${car.seating}</span>\r\n              </div>\r\n\r\n              <button class=\"region-label\" data-bs-toggle=\"tooltip\"\r\n                data-bs-placement=\"top\"\r\n                data-bs-custom-class=\"custom-tooltip\"\r\n                data-bs-title=\"${   car.region.length < 4\r\n                    ? car.region.toUpperCase()\r\n                    : car.region[0].toUpperCase() +\r\n                      car.region.slice(1).toLowerCase()}\" \r\n                >\r\n                <ion-icon \r\n                 \r\n                class=\"car-icon\" name=\"location-sharp\"></ion-icon>\r\n                <span class=\"car-region\">${car.cca3.toUpperCase()}</span>\r\n              </button>\r\n\r\n              <div class=\"rate-label\">\r\n                <span class=\"currency\">$</span>\r\n                <span class=\"car-amount me-1\">${car.rate}</span>\r\n                <span class=\"car-rate\">/d</span>\r\n              </div>\r\n              \r\n              <button\r\n               class=\"btn btn-primary btn-view hidden mt-4 ${btn === 'view'? \"\": \"disabled\"}\"\r\n               data-bs-toggle=\"modal\"\r\n               data-bs-target=\"#car-info\"\r\n               ${car.status === 'rented'||car.status === 'reserved'?`data-res-id=${car.res_id}`:\"\"}\r\n              >${btn}</button>\r\n            </div>\r\n          </div>\r\n  `;\r\n  }\r\n\r\n  renderCarView(car, active, location) {\r\n    let brand = car.brand;\r\n    brand = brand\r\n      .split(\" \")\r\n      .map((word) => word[0].toUpperCase() + word.slice(1).toLowerCase())\r\n      .join(\" \");\r\n\r\n    if (brand.length < 4) brand = brand.toUpperCase();\r\n    this.#viewTitle.textContent = brand + \" \" + car.model.toUpperCase();\r\n    this.#carouselContainer.innerHTML = this.#generateCarouselHTML(car);\r\n    this.#infoContainer.innerHTML = this.#generateInfoHTML(car, brand);\r\n    if (car.status === \"rented\" || car.status === \"reserved\") {\r\n      if (this.#infoContainer.classList.contains(\"gap\"))\r\n        this.#infoContainer.classList.remove(\"gap\");\r\n    } else this.#infoContainer.classList.add(\"gap\");\r\n    //prettier-ignore\r\n    this.#footerContainer.innerHTML = this.#generateFooterHTML(active,location);\r\n  }\r\n\r\n  #generateInfoHTML(car, brand) {\r\n    //prettier-ignore\r\n    return `\r\n    <div class=\"field\">\r\n                <div class=\"info-icon\">\r\n                  <ion-icon name=\"construct\"></ion-icon>\r\n                </div>\r\n                <div class=\"info-text\">${brand}</div>\r\n              </div>\r\n\r\n              <div class=\"field\">\r\n                <div class=\"info-icon\">\r\n                  <ion-icon name=\"speedometer\"></ion-icon>\r\n                </div>\r\n                <div class=\"info-text\">${car.model.toUpperCase()}</div>\r\n              </div>\r\n\r\n              <div class=\"field\">\r\n                <div class=\"info-icon\">\r\n                  <ion-icon name=\"calendar-number\"></ion-icon>\r\n                </div>\r\n                <div class=\"info-text\">${car.year}</div>\r\n              </div>\r\n\r\n              <div class=\"field\">\r\n                <div class=\"info-icon\">\r\n                  <ion-icon name=\"settings\"></ion-icon>\r\n                </div>\r\n                <div class=\"info-text\">${\r\n                  car.transmission[0].toUpperCase() +\r\n                  car.transmission.slice(1).toLowerCase()\r\n                }</div>\r\n              </div>\r\n\r\n              <div class=\"field\">\r\n                <div class=\"info-icon\">\r\n                  <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    fill=\"currentColor\"\r\n                    class=\"w-6 h-6\"\r\n                  >\r\n                    <path\r\n                      fill-rule=\"evenodd\"\r\n                      d=\"M1.5 7.125c0-1.036.84-1.875 1.875-1.875h6c1.036 0 1.875.84 1.875 1.875v3.75c0 1.036-.84 1.875-1.875 1.875h-6A1.875 1.875 0 011.5 10.875v-3.75zm12 1.5c0-1.036.84-1.875 1.875-1.875h5.25c1.035 0 1.875.84 1.875 1.875v8.25c0 1.035-.84 1.875-1.875 1.875h-5.25a1.875 1.875 0 01-1.875-1.875v-8.25zM3 16.125c0-1.036.84-1.875 1.875-1.875h5.25c1.036 0 1.875.84 1.875 1.875v2.25c0 1.035-.84 1.875-1.875 1.875h-5.25A1.875 1.875 0 013 18.375v-2.25z\"\r\n                      clip-rule=\"evenodd\"\r\n                    />\r\n                  </svg>\r\n                </div>\r\n                <div class=\"info-text\">${\r\n                  car.type[0].toUpperCase() + car.type.slice(1).toLowerCase()\r\n                }</div>\r\n              </div>\r\n\r\n              <div class=\"field\">\r\n                <div class=\"info-icon\">\r\n                  <ion-icon name=\"flash\"></ion-icon>\r\n                </div>\r\n                <div class=\"info-text\">${\r\n                  car.powertrain[0].toUpperCase() + car.powertrain.slice(1).toLowerCase()\r\n                }</div>\r\n              </div>\r\n\r\n              <div class=\"field\">\r\n                <div class=\"info-icon\">\r\n                  <ion-icon name=\"person\"></ion-icon>\r\n                </div>\r\n                <div class=\"info-text\">${car.seating}</div>\r\n              </div>\r\n\r\n              <div class=\"field\">\r\n                <div class=\"info-icon\">\r\n                  <ion-icon name=\"color-palette\"></ion-icon>\r\n                </div>\r\n                <div class=\"info-text\">${\r\n                  car.color[0].toUpperCase() + car.color.slice(1).toLowerCase()\r\n                }</div>\r\n              </div>\r\n\r\n              <div class=\"field\">\r\n                <div class=\"info-icon\">\r\n                  <ion-icon name=\"logo-usd\"></ion-icon>\r\n                </div>\r\n                <div class=\"info-text\">${\r\n                  car.rate\r\n                }<span class=\"car-rate\">/d</span></div>\r\n              </div>\r\n             \r\n               <div class=\"field \r\n              \">\r\n                <div class=\"info-icon\">\r\n                  <ion-icon name=\"car-sport\"></ion-icon>\r\n                </div>\r\n                <div class=\"info-text\">${car.plate_no.toUpperCase()}</div>\r\n              </div>\r\n\r\n              <div class=\"field \r\n              \">\r\n                <div class=\"info-icon\">\r\n                  <ion-icon name=\"location-sharp\"></ion-icon>\r\n                </div>\r\n                <div class=\"info-text\">${\r\n                  car.region.length < 4\r\n                    ? car.region.toUpperCase()\r\n                    : car.region[0].toUpperCase() +\r\n                      car.region.slice(1).toLowerCase()\r\n                }</div>\r\n              </div>\r\n\r\n\r\n               ${\r\n                 car.status === \"reserved\" || car.status === \"rented\"\r\n                   ? `\r\n                <div class=\"field\">\r\n                  <div class=\"info-icon\">\r\n                    <ion-icon name=\"calendar-number\"></ion-icon>\r\n                  </div>\r\n                  <div class=\"info-text\"><span class=\"pay-sub\">reserve date</span>${\r\n                    car.date.split(\"T\")[0]\r\n                  }</div>\r\n                </div>\r\n\r\n                <div class=\"field info-date\">\r\n                  <div class=\"info-icon me-3\">\r\n                    <ion-icon name=\"calendar\"></ion-icon>\r\n                  </div>\r\n                  <div class=\"info-text me-2\"><span class=\"pay-sub\">pick-up date</span>${car.pick_date.split(\"T\")[0]}</div>\r\n                  <div class=\"info-text\"><span class=\"pay-sub\">drop-off date</span>${car.drop_date.split(\"T\")[0]}</div>\r\n                </div>\r\n\r\n                <div class=\"field info-order\">\r\n                  <div class=\"info-icon me-3\">\r\n                    <ion-icon name=\"cube\"></ion-icon>\r\n                  </div>\r\n                  <div class=\"info-text me-2\"><span class=\"pay-sub\">reservation number</span>${car.res_id}</div>\r\n                </div>\r\n              `\r\n                   : \"\"\r\n               }\r\n    `;\r\n  }\r\n\r\n  #generateFooterHTML(active) {\r\n    let type;\r\n\r\n    if (active === \"home\" || active === \"favourites\") type = \"reserve\";\r\n\r\n    if (active === \"reserved\") type = \"pick-up\";\r\n\r\n    if (active === \"rented\") type = \"return\";\r\n\r\n    // get location for favourites\r\n\r\n    let html = `\r\n            <button \r\n            ${\r\n              type === \"reserve\"\r\n                ? `form=\"action\"\r\n                   type=\"submit\"\r\n                   `\r\n                : \"\"\r\n            } \r\n\r\n            type=\"button\" class=\"btn btn-primary btn-${type}\">${type}</button>`;\r\n\r\n    if (type === \"pick-up\")\r\n      return (\r\n        ` <button type=\"button\"  class=\"btn btn-outline-primary btn-revoke\">revoke</button>` +\r\n        \" \" +\r\n        html\r\n      );\r\n\r\n    return html;\r\n  }\r\n\r\n  #generateCarouselHTML(car) {\r\n    return `\r\n    <div class=\"carousel-item active\">\r\n                  <img\r\n                    src=\"https://cdn.imagin.studio/getImage?customer=egalexu&target=make&make=${car.brand}&modelFamily=${car.model}&modelYear=${car.year}&paintId=imagin-${car.color}\"\r\n                    class=\"d-block w-100\"\r\n                    alt=\"...\"\r\n                  />\r\n                </div>\r\n                <div class=\"carousel-item\">\r\n                  <img\r\n                    src=\"https://cdn.imagin.studio/getImage?customer=egalexu&target=make&make=${car.brand}&modelFamily=${car.model}&modelYear=${car.year}&paintId=imagin-${car.color}&angle=09\"\r\n                    class=\"d-block w-100\"\r\n                    alt=\"...\"\r\n                  />\r\n                </div>\r\n                <div class=\"carousel-item\">\r\n                  <img\r\n                    src=\"https://cdn.imagin.studio/getImage?customer=egalexu&target=make&make=${car.brand}&modelFamily=${car.model}&modelYear=${car.year}&paintId=imagin-${car.color}&angle=22\"\r\n                    class=\"d-block w-100\"\r\n                    alt=\"...\"\r\n                  />\r\n                </div>\r\n                <div class=\"carousel-item\">\r\n                  <img\r\n                    src=\"https://cdn.imagin.studio/getImage?customer=egalexu&target=make&make=${car.brand}&modelFamily=${car.model}&modelYear=${car.year}&paintId=imagin-${car.color}&angle=23\"\r\n                    class=\"d-block w-100\"\r\n                    alt=\"...\"\r\n                  />\r\n                </div>\r\n                <div class=\"carousel-item\">\r\n                  <img\r\n                    src=\"https://cdn.imagin.studio/getImage?customer=egalexu&target=make&make=${car.brand}&modelFamily=${car.model}&modelYear=${car.year}&paintId=imagin-${car.color}&angle=13\"\r\n                    class=\"d-block w-100\"\r\n                    alt=\"...\"\r\n                  />\r\n                </div>\r\n                <div class=\"carousel-item\">\r\n                  <img\r\n                    src=\"https://cdn.imagin.studio/getImage?customer=egalexu&target=make&make=${car.brand}&modelFamily=${car.model}&modelYear=${car.year}&paintId=imagin-${car.color}&angle=29\"\r\n                    class=\"d-block w-100\"\r\n                    alt=\"...\"\r\n                  />\r\n                </div>`;\r\n  }\r\n\r\n  renderPayments(data) {\r\n    this.payContainer.innerHTML = \"\";\r\n\r\n    data.forEach((payment) => {\r\n      let brand = payment.brand;\r\n      brand = brand\r\n        .split(\" \")\r\n        .map((word) => word[0].toUpperCase() + word.slice(1).toLowerCase())\r\n        .join(\" \");\r\n\r\n      if (brand.length < 4) brand = brand.toUpperCase();\r\n\r\n      //prettier-ignore\r\n      const html = `\r\n    <div class=\"payment ${payment.pay_status === \"paid\" ? \"paid\" : \"\"}\" data-order-id=\"${\r\n        payment.res_id\r\n      }\" data-car-id=\"${payment.car_id}\">\r\n        <div class=\"pay-car\">${brand + \" \" + payment.model.toUpperCase()}</div>\r\n        <div class=\"pay-rate\"><span class=\"pay-sub\">rate/day</span>$${\r\n          payment.rate\r\n        }</div>\r\n\r\n        <div class=\"pay-status\">\r\n          <ion-icon class=\"pay-icon ${\r\n            payment.pay_status === \"paid\" ? \"hide\" : \"\"\r\n          }\" name=\"close-outline\"></ion-icon>\r\n          <ion-icon\r\n            class=\"pay-icon pay-check ${payment.pay_status === \"paid\" ? \"\" : \"hide\"}\"\r\n            name=\"checkmark-outline\"\r\n          ></ion-icon>\r\n        </div>\r\n\r\n        <div class=\"pay-date\">\r\n          <span class=\"pay-sub\">Order number</span> ${payment.res_id}\r\n        </div>\r\n        <div class=\"pay-total\"><span class=\"pay-sub\">Total ${\r\n          payment.pay_status === \"paid\"? `(${payment.method})` : \"\"\r\n        }</span>$${payment.total}</div>\r\n\r\n        <div class=\"pay-footer\">\r\n          <div class=\"pay-date\">\r\n            <span class=\"pay-sub\">Pick-up Date</span>${\r\n              payment.pick_date.split(\"T\")[0]\r\n            }\r\n          </div>\r\n          <div class=\"pay-date\">\r\n            <span class=\"pay-sub\">Drop-off Date</span>${\r\n              payment.drop_date.split(\"T\")[0]\r\n            }\r\n          </div>\r\n          <div class=\"pay-date\">\r\n            <span class=\"pay-sub\">Return Date</span>${\r\n              payment.return_date.split(\"T\")[0]\r\n            }\r\n          </div>\r\n          <div class=\"pay-date\">\r\n            <span class=\"pay-sub\">payment Date</span>${\r\n              payment.pay_date ? `${payment.pay_date.split(\"T\")[0]}` : \"-\"\r\n            }\r\n          </div>\r\n          <div class=\"pay-date\">\r\n            <span class=\"pay-sub\">Duration</span>${payment.period}\r\n            <span class=\"pay-sub\">day${payment.period>1?'s':\"\"}</span>\r\n          </div>\r\n        </div>\r\n        <button type=\"button\" data-bs-toggle=\"modal\" data-bs-target=\"#pay\" class=\"btn btn-primary btn-pay ${\r\n          payment.pay_status === \"paid\" ? \"hide\" : \"\"\r\n        }\">pay</button>\r\n        <button type=\"button\" class=\"btn btn-primary btn-paid disabled ${\r\n          payment.pay_status === \"paid\" ? \"\" : \"hide\"\r\n        }\">\r\n          paid\r\n        </button>\r\n      </div>\r\n      `;\r\n\r\n      this.payContainer.insertAdjacentHTML(\"beforeend\", html);\r\n    });\r\n  }\r\n}\r\n\r\nexport default new CarsView();\r\n"],"names":["parcelRequire","cars","document","querySelector","viewTitle","infoContainer","footerContainer","carouselContainer","error","message","this","payContainer","modal","openCard","renderError","classList","remove","textContent","hideError","add","clearActive","active","toggleCard","container","card","toggle","setModal","clearModal","closeModal","handle","querySelectorAll","forEach","addEventListener","bind","btn","$600220195c177136$export$11e7b1ba401d64f1","render","data","favs","favFlag","frag","createDocumentFragment","innerHTML","length","car","div","createElement","insertAdjacentHTML","generateHTML","some","fCar","car_id","appendChild","tooltip","bootstrap","Tooltip","flag","brand","split","map","word","toUpperCase","slice","toLowerCase","join","status","region","model","type","year","color","seating","cca3","rate","$600220195c177136$var$container","$600220195c177136$var$payContainer","$600220195c177136$var$info","$600220195c177136$var$alert","$600220195c177136$var$pick","$600220195c177136$var$drop","$600220195c177136$var$d","Date","$600220195c177136$var$t","setDate","getDate","$600220195c177136$var$today","getFullYear","getMonth","padStart","$600220195c177136$var$maxDuration","$600220195c177136$var$max","$600220195c177136$var$confirm","$600220195c177136$var$filtered","$600220195c177136$var$activeCar","$600220195c177136$var$active","$600220195c177136$var$handleForm","form","async","e","preventDefault","checkValidity","stopPropagation","formData","FormData","reserveData","entries","entry","$600220195c177136$var$showConfirmation","then","ev","catch","$600220195c177136$var$reserveHandler","value","$","min","max","title","action","Promise","resolve","reject","closest","dataset","carId","resId","$1a48e2ae5a8b5cd2$export$2e2bcd8739ae039","$600220195c177136$var$getActiveData","filter","c","id","renderCarView","$600220195c177136$var$pickHandler","$600220195c177136$var$revokeHandler","order","$600220195c177136$var$returnHandler","$fDite","state","filters","$8tiXn","default","renderFilter","addFiltersHandler","contains","res","addFavorite","$600220195c177136$var$showAlert","res1","removeFavorite","favourites","reserved","rented","userFilters","queryRes","push","result","includes","cca2","opts","opt","$600220195c177136$var$handleView","reset","transmission","powertrain","range","ariaExpanded","$600220195c177136$var$renderState","$600220195c177136$var$filter","$600220195c177136$var$navHandler","$600220195c177136$var$toggleActive","call","$600220195c177136$var$renderPayments","getPayments","payments","renderPayments","pay","orderId","$600220195c177136$var$paymentHandler","method","checked","makePayment","pickCar","revokeCar","info","reserveCar","countries","getCountries","initUI","name","getData","$600220195c177136$var$addFilters","$600220195c177136$var$reset","signOut","date"],"version":3,"file":"customer.ed382f83.js.map"}