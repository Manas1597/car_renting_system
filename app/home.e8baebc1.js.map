{"mappings":"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","sources":["website/src/js/home/controller.js","website/src/js/home/views/carsView.js"],"sourcesContent":["\"use strict\";\r\n\r\nimport \"core-js/stable\"; // polyfill everything\r\nimport \"regenerator-runtime/runtime\"; // polyfill async/await\r\nimport * as model from \"../model.js\";\r\nimport filterView from \"../filtersView.js\";\r\nimport carsView from \"./views/carsView.js\";\r\nimport { SERVER_URL } from \"../config.js\";\r\n\r\nconst container = document.querySelector(\".app-container\");\r\nconst payContainer = document.querySelector(\".payment-container\");\r\nconst info = document.querySelector(\"#car-info\");\r\nconst alert = document.querySelector(\".alert\");\r\nlet confirm;\r\n\r\nlet filtered, activeCar;\r\n\r\nconst init = async () => {\r\n  const countries = await model.getCountries();\r\n  filterView.initUI(countries);\r\n  await model.getData();\r\n\r\n  carsView.render(model.state.cars, model.state.favourites);\r\n  carsView.handle();\r\n  addFilters();\r\n\r\n  document.querySelector(\".btn-apply\").addEventListener(\"click\", filter.bind());\r\n  document.querySelector(\".btn-reset\").addEventListener(\"click\", reset.bind());\r\n  document\r\n    .querySelector(\".btn-join\")\r\n    .addEventListener(\r\n      \"click\",\r\n      () => (window.location = `${SERVER_URL}/createAccount`)\r\n    );\r\n\r\n  document\r\n    .querySelector(\".btn-signIn\")\r\n    .addEventListener(\"click\", () => (window.location = `${SERVER_URL}/logIn`));\r\n  handleView();\r\n};\r\n\r\nconst showAlert = function (message, flag = true) {\r\n  alert.textContent = message;\r\n  alert.classList.toggle(\"alert-hide\");\r\n  alert.classList.toggle(`${flag ? \"alert-success\" : \"alert-danger\"}`);\r\n\r\n  setTimeout(() => {\r\n    alert.classList.toggle(\"alert-hide\");\r\n    alert.classList.toggle(`${flag ? \"alert-success\" : \"alert-danger\"}`);\r\n    alert.textContent = \"\";\r\n  }, 3000);\r\n};\r\n\r\nconst handleView = function () {\r\n  document.querySelectorAll(\".btn-view\").forEach((btn) => {\r\n    const id = btn.closest(\".card\").dataset.carId;\r\n\r\n    btn.addEventListener(\"click\", () => {\r\n      carsView.setModal();\r\n\r\n      activeCar = getActiveData().filter((c) => c.car_id === id)[0];\r\n\r\n      carsView.renderCarView(activeCar);\r\n\r\n      document\r\n        .querySelector(\".btn-reserve\")\r\n        .addEventListener(\"click\", async () => {\r\n          let brand = activeCar.brand;\r\n          brand = brand\r\n            .split(\" \")\r\n            .map((word) => word[0].toUpperCase() + word.slice(1).toLowerCase())\r\n            .join(\" \");\r\n        });\r\n    });\r\n  });\r\n};\r\n\r\nconst addFilters = () => {\r\n  model.state.filters.forEach((filter) => {\r\n    filterView.renderFilter(filter);\r\n  });\r\n\r\n  filterView.addFiltersHandler();\r\n};\r\n\r\nconst getActiveData = () => {\r\n  return model.state.cars;\r\n};\r\n\r\nconst filter = function () {\r\n  let result = [];\r\n  let flag = false;\r\n  const data = getActiveData();\r\n\r\n  Object.entries(model.state.userFilters).forEach((filter) => {\r\n    const queryRes = [];\r\n    if (filter[0] === \"seating\" && filter[1] > 1) {\r\n      queryRes.push(...data.filter((car) => car.seating === filter[1]));\r\n\r\n      if (flag) result = result.filter((value) => queryRes.includes(value));\r\n      else result.push(...queryRes);\r\n\r\n      flag = true;\r\n      return;\r\n    }\r\n\r\n    if (filter[0] === \"region\" && filter[1] && filter[1] != \"-\") {\r\n      queryRes.push(\r\n        ...data.filter((car) => car.cca2 === filter[1].toUpperCase())\r\n      );\r\n\r\n      if (flag) result = result.filter((value) => queryRes.includes(value));\r\n      else result.push(...queryRes);\r\n\r\n      flag = true;\r\n      return;\r\n    }\r\n\r\n    if (filter[0] === \"range\" && filter[1].length > 0) {\r\n      const min = filter[1][0];\r\n      const max = filter[1][1];\r\n\r\n      queryRes.push(\r\n        ...data.filter((car) => +car.rate >= min && +car.rate <= max)\r\n      );\r\n\r\n      if (filter[0] === \"year\" && filter[1] > 0) {\r\n        queryRes.push(...data.filter((car) => car.year === filter[1]));\r\n\r\n        if (flag) result = result.filter((value) => queryRes.includes(value));\r\n        else result.push(...queryRes);\r\n\r\n        flag = true;\r\n        return;\r\n      }\r\n\r\n      if (flag) result = result.filter((value) => queryRes.includes(value));\r\n      else result.push(...queryRes);\r\n\r\n      flag = true;\r\n      return;\r\n    }\r\n\r\n    const opts = filter[1];\r\n    if (opts.length > 0) {\r\n      opts.forEach((opt) => {\r\n        queryRes.push(...data.filter((car) => car[filter[0]] === opt));\r\n      });\r\n\r\n      if (flag) result = result.filter((value) => queryRes.includes(value));\r\n      else result.push(...queryRes);\r\n\r\n      flag = true;\r\n    }\r\n  });\r\n\r\n  if (!flag) carsView.render(data);\r\n  else carsView.render(result);\r\n  carsView.handle();\r\n  handleView();\r\n  if (result.length > 0) showAlert(\"Showing filter results\");\r\n  else showAlert(\"No data found\", false);\r\n\r\n  filtered = true;\r\n};\r\n\r\nconst reset = function () {\r\n  filterView.reset();\r\n\r\n  model.state.userFilters = {\r\n    type: [],\r\n    transmission: [],\r\n    brand: [],\r\n    powertrain: [],\r\n    color: [],\r\n    seating: 1,\r\n    region: \"\",\r\n    range: [],\r\n    year: 0,\r\n  };\r\n\r\n  document.querySelectorAll(\".open\").forEach((btn) => {\r\n    btn.closest(\".btn-filter\").ariaExpanded = false;\r\n    btn.closest(\".filter\").querySelector(\".show\").classList.remove(\"show\");\r\n    btn.classList.remove(\"open\");\r\n    btn\r\n      .closest(\".btn-filter\")\r\n      .querySelector(\".rotate\")\r\n      .classList.remove(\"rotate\");\r\n  });\r\n\r\n  renderState();\r\n  handleView();\r\n\r\n  filtered = false;\r\n};\r\n\r\nconst renderState = function () {\r\n  carsView.clearModal();\r\n  carsView.render(getActiveData());\r\n  carsView.handle();\r\n  handleView();\r\n\r\n  if (filtered) filter();\r\n};\r\n\r\ndocument.querySelector(\"footer\").innerHTML = `\r\n      Copyrights &copy; ${new Date().getFullYear()} Amr Yasser, Marwan Khaled, and Begad Wael\r\n`;\r\n\r\ninit();\r\n","\"use strict\";\r\n\r\nclass CarsView {\r\n  #cars = document.querySelector(\".cars\");\r\n  #viewTitle = document.querySelector(\".view-title\");\r\n  #infoContainer = document.querySelector(\".car-info\");\r\n  #footerContainer = document.querySelector(\".view-footer\");\r\n  #carouselContainer = document.querySelector(\".carousel-inner\");\r\n  #error = document.querySelector(\".error-message\");\r\n  #message = this.#error.querySelector(\".message\");\r\n  payContainer = document.querySelector(\".payment-container\");\r\n\r\n  modal = false;\r\n  openCard;\r\n\r\n  #renderError = function () {\r\n    this.#error.classList.remove(\"hide\");\r\n    this.#message.textContent = \"no cars found\";\r\n  };\r\n\r\n  #hideError() {\r\n    this.#error.classList.add(\"hide\");\r\n  }\r\n\r\n  #clearActive = (active) => {\r\n    active.querySelector(\".card-img-top\").classList.remove(\"img-active\");\r\n    active.querySelector(\".btn-view\").classList.add(\"hidden\");\r\n    active.classList.remove(\"card-active\");\r\n  };\r\n\r\n  #toggleCard = function (container) {\r\n    if (this.modal) return;\r\n\r\n    const card = container.querySelector(\".card\");\r\n    const active = document.querySelector(\".card-active\");\r\n\r\n    card.querySelector(\".card-img-top\").classList.toggle(\"img-active\");\r\n    card.querySelector(\".btn-view\").classList.toggle(\"hidden\");\r\n    card.classList.toggle(\"card-active\");\r\n\r\n    if (active && active !== card) this.#clearActive(active);\r\n  };\r\n\r\n  setModal() {\r\n    this.modal = true;\r\n  }\r\n\r\n  clearModal() {\r\n    this.modal = false;\r\n  }\r\n\r\n  #closeModal() {\r\n    this.modal = false;\r\n\r\n    const card = document.querySelector(\".card-active\");\r\n\r\n    if (!card) return;\r\n    card.querySelector(\".card-img-top\").classList.toggle(\"img-active\");\r\n    card.querySelector(\".btn-view\").classList.toggle(\"hidden\");\r\n    card.classList.toggle(\"card-active\");\r\n  }\r\n\r\n  handle() {\r\n    [...document.querySelectorAll(\".card-container\")].forEach((card) => {\r\n      card.addEventListener(\"mouseover\", this.#toggleCard.bind(this, card));\r\n      card.addEventListener(\"mouseout\", this.#toggleCard.bind(this, card));\r\n    });\r\n\r\n    document\r\n      .querySelectorAll(\".btn-close-modal\")\r\n      .forEach((btn) =>\r\n        btn.addEventListener(\"click\", this.#closeModal.bind(this))\r\n      );\r\n  }\r\n\r\n  render(data) {\r\n    const frag = document.createDocumentFragment();\r\n    this.#hideError();\r\n    this.#cars.innerHTML = \"\";\r\n\r\n    if (data.length > 0) {\r\n      data.forEach((car) => {\r\n        const div = document.createElement(\"div\");\r\n        div.classList = \"card-container\";\r\n        div.insertAdjacentHTML(\"afterbegin\", this.#generateHTML(car));\r\n        frag.appendChild(div);\r\n      });\r\n      this.#cars.appendChild(frag);\r\n    } else {\r\n      this.#renderError();\r\n    }\r\n\r\n    document\r\n      .querySelectorAll('[data-bs-toggle=\"tooltip\"]')\r\n      .forEach((tooltip) => {\r\n        new bootstrap.Tooltip(tooltip);\r\n      });\r\n  }\r\n\r\n  #generateHTML(car) {\r\n    let brand = car.brand;\r\n    brand = brand\r\n      .split(\" \")\r\n      .map((word) => word[0].toUpperCase() + word.slice(1).toLowerCase())\r\n      .join(\" \");\r\n\r\n    if (brand.length < 4) brand = brand.toUpperCase();\r\n\r\n    //prettier-ignore\r\n    return `\r\n        <div class = \"card\" data-car-id =\"${car.car_id}\" data-region=\"${car.region}\">\r\n            <div class=\"card-header\">\r\n              <h3 class=\"car-brand\">${brand} ${car.model.toUpperCase()}</h3>\r\n              <div></div>\r\n\r\n              <span class=\"car-type\">${car.type.length<4?car.type.toUpperCase():\r\n                car.type[0].toUpperCase() + car.type.slice(1).toLowerCase()\r\n              }</span>\r\n            </div>\r\n\r\n            <div class=\"img-container mx-auto mb-3\">\r\n              <img\r\n                src=\"https://cdn.imagin.studio/getImage?customer=egalexu&target=make&make=${car.brand}&modelFamily=${car.model}&modelYear=${car.year}&paintId=imagin-${car.color}\"\r\n                class=\"card-img-top \"\r\n                alt=\"${car.brand} car photo\"\r\n              />\r\n            </div>\r\n\r\n            <div class=\"card-body mx-2\">\r\n              <div class=\"seating-label\">\r\n                <ion-icon class=\"car-icon\" name=\"person\"></ion-icon>\r\n                <span class=\"car-seating\">${car.seating}</span>\r\n              </div>\r\n\r\n              <button class=\"region-label\" data-bs-toggle=\"tooltip\"\r\n                data-bs-placement=\"top\"\r\n                data-bs-custom-class=\"custom-tooltip\"\r\n                data-bs-title=\"${   car.region.length < 4\r\n                    ? car.region.toUpperCase()\r\n                    : car.region[0].toUpperCase() +\r\n                      car.region.slice(1).toLowerCase()}\" \r\n                >\r\n                <ion-icon \r\n                 \r\n                class=\"car-icon\" name=\"location-sharp\"></ion-icon>\r\n                <span class=\"car-region\">${car.cca3.toUpperCase()}</span>\r\n              </button>\r\n\r\n              <div class=\"rate-label\">\r\n                <span class=\"currency\">$</span>\r\n                <span class=\"car-amount me-1\">${car.rate}</span>\r\n                <span class=\"car-rate\">/d</span>\r\n              </div>\r\n              \r\n              <button\r\n               class=\"btn btn-primary btn-view hidden mt-4\"\r\n               data-bs-toggle=\"modal\"\r\n               data-bs-target=\"#car-info\"\r\n              >view</button>\r\n            </div>\r\n          </div>\r\n  `;\r\n  }\r\n\r\n  renderCarView(car) {\r\n    let brand = car.brand;\r\n    brand = brand\r\n      .split(\" \")\r\n      .map((word) => word[0].toUpperCase() + word.slice(1).toLowerCase())\r\n      .join(\" \");\r\n\r\n    if (brand.length < 4) brand = brand.toUpperCase();\r\n    this.#viewTitle.textContent = brand + \" \" + car.model.toUpperCase();\r\n    this.#carouselContainer.innerHTML = this.#generateCarouselHTML(car);\r\n    this.#infoContainer.innerHTML = this.#generateInfoHTML(car, brand);\r\n    //prettier-ignore\r\n    this.#footerContainer.innerHTML = this.#generateFooterHTML();\r\n  }\r\n\r\n  #generateInfoHTML(car, brand) {\r\n    //prettier-ignore\r\n    return `\r\n    <div class=\"field\">\r\n                <div class=\"info-icon\">\r\n                  <ion-icon name=\"construct\"></ion-icon>\r\n                </div>\r\n                <div class=\"info-text\">${brand}</div>\r\n              </div>\r\n\r\n              <div class=\"field\">\r\n                <div class=\"info-icon\">\r\n                  <ion-icon name=\"speedometer\"></ion-icon>\r\n                </div>\r\n                <div class=\"info-text\">${car.model.toUpperCase()}</div>\r\n              </div>\r\n\r\n              <div class=\"field\">\r\n                <div class=\"info-icon\">\r\n                  <ion-icon name=\"calendar-number\"></ion-icon>\r\n                </div>\r\n                <div class=\"info-text\">${car.year}</div>\r\n              </div>\r\n\r\n              <div class=\"field\">\r\n                <div class=\"info-icon\">\r\n                  <ion-icon name=\"settings\"></ion-icon>\r\n                </div>\r\n                <div class=\"info-text\">${\r\n                  car.transmission[0].toUpperCase() +\r\n                  car.transmission.slice(1).toLowerCase()\r\n                }</div>\r\n              </div>\r\n\r\n              <div class=\"field\">\r\n                <div class=\"info-icon\">\r\n                  <svg\r\n                    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    viewBox=\"0 0 24 24\"\r\n                    fill=\"currentColor\"\r\n                    class=\"w-6 h-6\"\r\n                  >\r\n                    <path\r\n                      fill-rule=\"evenodd\"\r\n                      d=\"M1.5 7.125c0-1.036.84-1.875 1.875-1.875h6c1.036 0 1.875.84 1.875 1.875v3.75c0 1.036-.84 1.875-1.875 1.875h-6A1.875 1.875 0 011.5 10.875v-3.75zm12 1.5c0-1.036.84-1.875 1.875-1.875h5.25c1.035 0 1.875.84 1.875 1.875v8.25c0 1.035-.84 1.875-1.875 1.875h-5.25a1.875 1.875 0 01-1.875-1.875v-8.25zM3 16.125c0-1.036.84-1.875 1.875-1.875h5.25c1.036 0 1.875.84 1.875 1.875v2.25c0 1.035-.84 1.875-1.875 1.875h-5.25A1.875 1.875 0 013 18.375v-2.25z\"\r\n                      clip-rule=\"evenodd\"\r\n                    />\r\n                  </svg>\r\n                </div>\r\n                <div class=\"info-text\">${\r\n                  car.type[0].toUpperCase() + car.type.slice(1).toLowerCase()\r\n                }</div>\r\n              </div>\r\n\r\n              <div class=\"field\">\r\n                <div class=\"info-icon\">\r\n                  <ion-icon name=\"flash\"></ion-icon>\r\n                </div>\r\n                <div class=\"info-text\">${\r\n                  car.powertrain[0].toUpperCase() + car.powertrain.slice(1).toLowerCase()\r\n                }</div>\r\n              </div>\r\n\r\n              <div class=\"field\">\r\n                <div class=\"info-icon\">\r\n                  <ion-icon name=\"person\"></ion-icon>\r\n                </div>\r\n                <div class=\"info-text\">${car.seating}</div>\r\n              </div>\r\n\r\n              <div class=\"field\">\r\n                <div class=\"info-icon\">\r\n                  <ion-icon name=\"color-palette\"></ion-icon>\r\n                </div>\r\n                <div class=\"info-text\">${\r\n                  car.color[0].toUpperCase() + car.color.slice(1).toLowerCase()\r\n                }</div>\r\n              </div>\r\n\r\n              <div class=\"field\">\r\n                <div class=\"info-icon\">\r\n                  <ion-icon name=\"logo-usd\"></ion-icon>\r\n                </div>\r\n                <div class=\"info-text\">${\r\n                  car.rate\r\n                }<span class=\"car-rate\">/d</span></div>\r\n              </div>\r\n             \r\n               <div class=\"field \r\n              \">\r\n                <div class=\"info-icon\">\r\n                  <ion-icon name=\"car-sport\"></ion-icon>\r\n                </div>\r\n                <div class=\"info-text\">${car.plate_no}</div>\r\n              </div>\r\n\r\n              <div class=\"field \r\n              \">\r\n                <div class=\"info-icon\">\r\n                  <ion-icon name=\"location-sharp\"></ion-icon>\r\n                </div>\r\n                <div class=\"info-text\">${\r\n                  car.region.length < 4\r\n                    ? car.region.toUpperCase()\r\n                    : car.region[0].toUpperCase() +\r\n                      car.region.slice(1).toLowerCase()\r\n                }</div>\r\n              </div>\r\n\r\n\r\n               ${\r\n                 car.status === \"reserved\" || car.status === \"rented\"\r\n                   ? `\r\n                <div class=\"field\">\r\n                  <div class=\"info-icon\">\r\n                    <ion-icon name=\"calendar-number\"></ion-icon>\r\n                  </div>\r\n                  <div class=\"info-text\"><span class=\"pay-sub\">reserve date</span>${\r\n                    car.date.split(\"T\")[0]\r\n                  }</div>\r\n                </div>\r\n\r\n                <div class=\"field info-date\">\r\n                  <div class=\"info-icon me-3\">\r\n                    <ion-icon name=\"calendar\"></ion-icon>\r\n                  </div>\r\n                  <div class=\"info-text me-2\"><span class=\"pay-sub\">pick-up date</span>${car.pickup.split(\"T\")[0]}</div>\r\n                  <div class=\"info-text\"><span class=\"pay-sub\">drop-off date</span>${car.drop.split(\"T\")[0]}</div>\r\n                </div>\r\n\r\n                <div class=\"field info-order\">\r\n                  <div class=\"info-icon me-3\">\r\n                    <ion-icon name=\"cube\"></ion-icon>\r\n                  </div>\r\n                  <div class=\"info-text me-2\"><span class=\"pay-sub\">reservation number</span>${car.resId}</div>\r\n                </div>\r\n              `\r\n                   : \"\"\r\n               }\r\n    `;\r\n  }\r\n\r\n  #generateFooterHTML() {\r\n    let html = `\r\n            <button  \r\n            type=\"button\" class=\"btn btn-primary btn-reserve disabled\">Sign to reserve</button>`;\r\n\r\n    return html;\r\n  }\r\n\r\n  #generateCarouselHTML(car) {\r\n    return `\r\n    <div class=\"carousel-item active\">\r\n                  <img\r\n                    src=\"https://cdn.imagin.studio/getImage?customer=egalexu&target=make&make=${car.brand}&modelFamily=${car.model}&modelYear=${car.year}&paintId=imagin-${car.color}\"\r\n                    class=\"d-block w-100\"\r\n                    alt=\"...\"\r\n                  />\r\n                </div>\r\n                <div class=\"carousel-item\">\r\n                  <img\r\n                    src=\"https://cdn.imagin.studio/getImage?customer=egalexu&target=make&make=${car.brand}&modelFamily=${car.model}&modelYear=${car.year}&paintId=imagin-${car.color}&angle=09\"\r\n                    class=\"d-block w-100\"\r\n                    alt=\"...\"\r\n                  />\r\n                </div>\r\n                <div class=\"carousel-item\">\r\n                  <img\r\n                    src=\"https://cdn.imagin.studio/getImage?customer=egalexu&target=make&make=${car.brand}&modelFamily=${car.model}&modelYear=${car.year}&paintId=imagin-${car.color}&angle=22\"\r\n                    class=\"d-block w-100\"\r\n                    alt=\"...\"\r\n                  />\r\n                </div>\r\n                <div class=\"carousel-item\">\r\n                  <img\r\n                    src=\"https://cdn.imagin.studio/getImage?customer=egalexu&target=make&make=${car.brand}&modelFamily=${car.model}&modelYear=${car.year}&paintId=imagin-${car.color}&angle=23\"\r\n                    class=\"d-block w-100\"\r\n                    alt=\"...\"\r\n                  />\r\n                </div>\r\n                <div class=\"carousel-item\">\r\n                  <img\r\n                    src=\"https://cdn.imagin.studio/getImage?customer=egalexu&target=make&make=${car.brand}&modelFamily=${car.model}&modelYear=${car.year}&paintId=imagin-${car.color}&angle=13\"\r\n                    class=\"d-block w-100\"\r\n                    alt=\"...\"\r\n                  />\r\n                </div>\r\n                <div class=\"carousel-item\">\r\n                  <img\r\n                    src=\"https://cdn.imagin.studio/getImage?customer=egalexu&target=make&make=${car.brand}&modelFamily=${car.model}&modelYear=${car.year}&paintId=imagin-${car.color}&angle=29\"\r\n                    class=\"d-block w-100\"\r\n                    alt=\"...\"\r\n                  />\r\n                </div>`;\r\n  }\r\n\r\n  renderPayments(data) {\r\n    this.payContainer.innerHTML = \"\";\r\n\r\n    data.forEach((payment) => {\r\n      let brand = payment.brand;\r\n      brand = brand\r\n        .split(\" \")\r\n        .map((word) => word[0].toUpperCase() + word.slice(1).toLowerCase())\r\n        .join(\" \");\r\n\r\n      if (brand.length < 4) brand = brand.toUpperCase();\r\n\r\n      const html = `\r\n    <div class=\"payment ${payment.status ? \"paid\" : \"\"}\" data-order-id=\"${\r\n        payment.orderId\r\n      }\" data-car-id=\"${payment.car_id}\">\r\n        <div class=\"pay-car\">${brand + \" \" + payment.model.toUpperCase()}</div>\r\n        <div class=\"pay-rate\"><span class=\"pay-sub\">rate/day</span>$${\r\n          payment.rate\r\n        }</div>\r\n\r\n        <div class=\"pay-status\">\r\n          <ion-icon class=\"pay-icon ${\r\n            payment.status ? \"hide\" : \"\"\r\n          }\" name=\"close-outline\"></ion-icon>\r\n          <ion-icon\r\n            class=\"pay-icon pay-check ${payment.status ? \"\" : \"hide\"}\"\r\n            name=\"checkmark-outline\"\r\n          ></ion-icon>\r\n        </div>\r\n\r\n        <div class=\"pay-date\">\r\n          <span class=\"pay-sub\">Order number</span> ${payment.orderId}\r\n        </div>\r\n        <div class=\"pay-total\"><span class=\"pay-sub\">Total ${\r\n          payment.status ? `(${payment.method})` : \"\"\r\n        }</span>$${payment.payment}</div>\r\n\r\n        <div class=\"pay-footer\">\r\n          <div class=\"pay-date\">\r\n            <span class=\"pay-sub\">Pick-up Date</span>${\r\n              payment.pickup.split(\"T\")[0]\r\n            }\r\n          </div>\r\n          <div class=\"pay-date\">\r\n            <span class=\"pay-sub\">Drop-off Date</span>${\r\n              payment.drop.split(\"T\")[0]\r\n            }\r\n          </div>\r\n          <div class=\"pay-date\">\r\n            <span class=\"pay-sub\">Return Date</span>${\r\n              payment.return.split(\"T\")[0]\r\n            }\r\n          </div>\r\n          <div class=\"pay-date\">\r\n            <span class=\"pay-sub\">payment Date</span>${\r\n              payment.payDate ? `${payment.payDate.split(\"T\")[0]}` : \"-\"\r\n            }\r\n          </div>\r\n          <div class=\"pay-date\">\r\n            <span class=\"pay-sub\">Duration</span>${payment.duration}\r\n            <span class=\"pay-sub\">days</span>\r\n          </div>\r\n        </div>\r\n        <button type=\"button\" data-bs-toggle=\"modal\" data-bs-target=\"#pay\" class=\"btn btn-primary btn-pay ${\r\n          payment.status ? \"hide\" : \"\"\r\n        }\">pay</button>\r\n        <button type=\"button\" class=\"btn btn-primary btn-paid disabled ${\r\n          payment.status ? \"\" : \"hide\"\r\n        }\">\r\n          paid\r\n        </button>\r\n      </div>\r\n      `;\r\n\r\n      this.payContainer.insertAdjacentHTML(\"beforeend\", html);\r\n    });\r\n  }\r\n}\r\n\r\nexport default new CarsView();\r\n"],"names":["parcelRequire","cars","document","querySelector","viewTitle","infoContainer","footerContainer","carouselContainer","error","message","this","payContainer","modal","openCard","renderError","classList","remove","textContent","hideError","add","clearActive","active","toggleCard","container","card","toggle","setModal","clearModal","closeModal","handle","querySelectorAll","forEach","addEventListener","bind","btn","render","data","frag","createDocumentFragment","innerHTML","length","car","div","createElement","insertAdjacentHTML","generateHTML","appendChild","tooltip","bootstrap","Tooltip","brand","split","map","word","toUpperCase","slice","toLowerCase","join","car_id","region","model","type","year","color","seating","cca3","$6cf84285f72512db$var$alert","$6cf84285f72512db$var$filtered","$6cf84285f72512db$var$activeCar","$6cf84285f72512db$var$showAlert","flag","setTimeout","$6cf84285f72512db$var$handleView","id","closest","dataset","carId","$0db7725f36d705de$export$2e2bcd8739ae039","$6cf84285f72512db$var$getActiveData","filter","c","renderCarView","async","$6cf84285f72512db$var$addFilters","$fDite","state","filters","$8tiXn","default","renderFilter","addFiltersHandler","$6cf84285f72512db$var$filter","result","Object","entries","userFilters","queryRes","push","value","includes","cca2","min","max","rate","opts","opt","$6cf84285f72512db$var$reset","reset","transmission","powertrain","range","ariaExpanded","$6cf84285f72512db$var$renderState","Date","getFullYear","countries","getCountries","initUI","getData","favourites","window","location","$7PUg4","SERVER_URL"],"version":3,"file":"home.e8baebc1.js.map"}