{"mappings":"oeAAA,IAAAA,EAAAC,EAAA,S,aAKA,MAAMC,EAAOC,SAASC,cAAc,SAC9BC,EAAQF,SAASC,cAAc,UAE/BE,EAAYC,eAAgBC,EAASC,GAAO,GAChDJ,EAAMK,YAAcF,EACpBH,EAAMM,UAAUC,OAAO,cACvBP,EAAMM,UAAUC,OAAO,IAAGH,EAAO,gBAAkB,iBAEnDI,YAAW,KACTR,EAAMM,UAAUC,OAAO,cACvBP,EAAMM,UAAUC,OAAO,IAAGH,EAAO,gBAAkB,iBACnDJ,EAAMK,YAAc,KACnB,IACL,EAGER,EAAKY,iBAAiB,UAAUP,MAAOQ,IACrCA,EAAEC,iBACF,MAAMP,EAAOP,EAAKe,gBAIlB,GAFAf,EAAKS,UAAUO,IAAI,kBAEdT,EAEH,YADAM,EAAEI,kBAIJ,MAAMC,EAAW,IAAIC,SAASnB,GACxBoB,EAAU,CAAC,EAIjB,MAFA,IAAIF,EAASG,WAAWC,SAASC,GAAWH,EAAQG,EAAM,IAAMA,EAAM,KAElEH,EAAQI,WAAaJ,EAAQK,iBAC/BrB,EAAU,0BAA0B,QACpCJ,EAAKS,UAAUiB,OAAO,kBAIpBN,EAAQI,SAASG,OAAS,GAC5BvB,EAAU,2CAA2C,QACrDJ,EAAKS,UAAUiB,OAAO,kBAIiB,YAA9BE,EAAUR,EAAQS,QAC3BzB,EAAU,yBAAyB,QACnCJ,EAAKS,UAAUiB,OAAO,6BAINI,EAAAC,SAAeX,IAOjChB,EACE,sEAGFO,YAAW,KACTqB,OAAOC,SAAW,GAAGnC,EAAAoC,kBAAkB,GACtC,OAVD9B,EAAU,uBAAuB,GAUhC,IAIP,MAAMwB,EAAYvB,MAAO8B,IACvB,MAKMC,QAAYC,MAChB,kCAAkCF,IANb,CACrBG,OAAQ,MACRC,SAAU,WAUZ,aAFmBH,EAAII,QAEXC,MAAM,EAGpBxC,SAASC,cAAc,UAAUwC,UAAY,8BAK5B,IAAAC,MAAAC,4D","sources":["website/src/js/register.js"],"sourcesContent":["\"use strict\";\r\n\r\nimport { SERVER_URL } from \"./config.js\";\r\nimport * as model from \"./model.js\";\r\n\r\nconst form = document.querySelector(\".form\");\r\nconst alert = document.querySelector(\".alert\");\r\n\r\nconst showAlert = async function (message, flag = true) {\r\n  alert.textContent = message;\r\n  alert.classList.toggle(\"alert-hide\");\r\n  alert.classList.toggle(`${flag ? \"alert-success\" : \"alert-danger\"}`);\r\n\r\n  setTimeout(() => {\r\n    alert.classList.toggle(\"alert-hide\");\r\n    alert.classList.toggle(`${flag ? \"alert-success\" : \"alert-danger\"}`);\r\n    alert.textContent = \"\";\r\n  }, 2000);\r\n};\r\n\r\n(() => {\r\n  form.addEventListener(\"submit\", async (e) => {\r\n    e.preventDefault();\r\n    const flag = form.checkValidity();\r\n\r\n    form.classList.add(\"was-validated\");\r\n\r\n    if (!flag) {\r\n      e.stopPropagation();\r\n      return;\r\n    }\r\n\r\n    const formData = new FormData(form);\r\n    const regData = {};\r\n\r\n    [...formData.entries()].forEach((entry) => (regData[entry[0]] = entry[1]));\r\n\r\n    if (regData.password !== regData.confirmPassword) {\r\n      showAlert(\"Passwords do not match\", false);\r\n      form.classList.remove(\"was-validated\");\r\n      return;\r\n    }\r\n\r\n    if (regData.password.length < 8) {\r\n      showAlert(\"Passwords must be at least 8 characters\", false);\r\n      form.classList.remove(\"was-validated\");\r\n      return;\r\n    }\r\n\r\n    if ((await checkMail(regData.email)) === 400) {\r\n      showAlert(\"Invalid email address\", false);\r\n      form.classList.remove(\"was-validated\");\r\n      return;\r\n    }\r\n\r\n    const res = await model.register(regData);\r\n\r\n    if (!res) {\r\n      showAlert(\"Registration failed\", false);\r\n      return;\r\n    }\r\n\r\n    showAlert(\r\n      \"Registration completed successfully, redirecting you to login page\"\r\n    );\r\n\r\n    setTimeout(() => {\r\n      window.location = `${SERVER_URL}/logIn`;\r\n    }, 2200);\r\n  });\r\n})();\r\n\r\nconst checkMail = async (mail) => {\r\n  const requestOptions = {\r\n    method: \"GET\",\r\n    redirect: \"follow\",\r\n  };\r\n\r\n  const res = await fetch(\r\n    `https://api.mailcheck.ai/email/${mail}`,\r\n    requestOptions\r\n  );\r\n\r\n  const data = await res.json();\r\n\r\n  return data.status;\r\n};\r\n\r\ndocument.querySelector(\"footer\").innerHTML = `\r\n      Copyrights &copy; ${new Date().getFullYear()} Amr Yasser, Marwan Khaled, and Begad Wael\r\n`;\r\n\r\ndocument\r\n  .querySelector(\".btn-outline-primary\")\r\n  .addEventListener(\"click\", () => (window.location = `${SERVER_URL}/`));\r\n"],"names":["$7PUg4","parcelRequire","$739fedef971e25e5$var$form","document","querySelector","$739fedef971e25e5$var$alert","$739fedef971e25e5$var$showAlert","async","message","flag","textContent","classList","toggle","setTimeout","addEventListener","e","preventDefault","checkValidity","add","stopPropagation","formData","FormData","regData","entries","forEach","entry","password","confirmPassword","remove","length","$739fedef971e25e5$var$checkMail","email","$fDite","register","window","location","SERVER_URL","mail","res","fetch","method","redirect","json","status","innerHTML","Date","getFullYear"],"version":3,"file":"register.085eb4f5.js.map"}