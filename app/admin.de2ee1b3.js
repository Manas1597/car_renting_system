var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},t={},a=e.parcelRequire98c7;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in t){var a=t[e];delete t[e];var s={id:e,exports:{}};return n[e]=s,a.call(s.exports,s,s.exports),s.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,n){t[e]=n},e.parcelRequire98c7=a),a("3gXC5"),a("ic7rk"),a("9NZOq");var s=a("fDite"),i=a("8tiXn");var r=new class{#e=document.querySelector(".query-result");#n=document.querySelector(".view-title");#t=document.querySelector(".car-info");#a=document.querySelector(".view-footer");#s=document.querySelector(".carousel-inner");#i=document.querySelector(".add-container");#r;#o=document.querySelector(".error-message");#d=this.#o.querySelector(".message");#l=document.querySelector(".num-rows");#c=function(){this.#o.classList.remove("hide"),this.#d.textContent="no data found"};#u(){this.#o.classList.add("hide")}render(e,n,t="cars"){const a=document.createElement("thead"),s=document.createElement("tbody"),i=document.createElement("tr");this.#u(),this.#e.innerHTML="",e.length>0?(this.#l.classList.contains("hide")&&this.#l.classList.remove("hide"),this.#l.textContent=`showing ${e.length} row${e.length>1?"s":""}`,i.classList="table-row table-head",i.innerHTML=n,a.appendChild(i),"cars"===t&&e.length>0&&e.forEach(((e,n)=>{const t=document.createElement("tr");t.insertAdjacentHTML("afterbegin",this.#p(e,n+1)),s.appendChild(t)})),"status"===t&&e.length>0&&e.forEach(((e,n)=>{const t=document.createElement("tr");t.insertAdjacentHTML("afterbegin",this.#m(e,n+1)),s.appendChild(t)})),"customers"===t&&e.length>0&&e.forEach(((e,n)=>{const t=document.createElement("tr");t.insertAdjacentHTML("afterbegin",this.#v(e,n+1)),s.appendChild(t)})),"reservations"===t&&e.length>0&&e.forEach(((e,n)=>{const t=document.createElement("tr");t.insertAdjacentHTML("afterbegin",this.#b(e,n+1)),s.appendChild(t)})),"payments"===t&&e.length>0&&e.forEach(((e,n)=>{const t=document.createElement("tr");t.insertAdjacentHTML("afterbegin",this.#f(e,n+1)),s.appendChild(t)})),this.#e.appendChild(a),this.#e.appendChild(s)):(this.#c(),this.#l.classList.add("hide"))}renderCarView(e,n){let t=e.brand;t=t.split(" ").map((e=>e[0].toUpperCase()+e.slice(1).toLowerCase())).join(" "),t.length<4&&(t=t.toUpperCase()),this.#n.textContent=t+" "+e.model.toUpperCase(),this.#s.innerHTML=this.#g(e),this.#t.innerHTML=this.#h(e,t),"rented"===e.status||"reserved"===e.status?this.#t.classList.contains("gap")&&this.#t.classList.remove("gap"):this.#t.classList.add("gap"),"status"!==n&&(this.#a.innerHTML=this.#y(e,n))}#f(e,n){return`\n        <tr class="table-row"">\n            <td class="table-field">${n}</td>\n            <td class="table-field">${e?.date?.split("T")[0]}</td>\n            <td class="table-field">${e.number}</td>\n            <td class="table-field">${e.total}</td>\n          </tr>\n  `}#m(e,n){let t=e.brand;return t=t.split(" ").map((e=>e[0].toUpperCase()+e.slice(1).toLowerCase())).join(" "),t.length<4&&(t=t.toUpperCase()),`\n        <tr class="table-row"">\n            <td class="table-field">${n}</td>\n            <td class="table-field">${e.car_id}</td>\n            <td class="table-field">${t}</td>\n            <td class="table-field">${e.model.toUpperCase()}</td>\n            <td class="table-field">${e.plate_no.toUpperCase()}</td>\n            <td class="table-field">${e.region.length<4?e.region.toUpperCase():e.region[0].toUpperCase()+e.region.slice(1).toLowerCase()}</td>\n            <td class="table-field">${e.rate}</td>\n            <td class="table-field">${e.status.length<4?e.status.toUpperCase():e.status[0].toUpperCase()+e.status.slice(1).toLowerCase()}</td>\n               <td class="table-field">\n              <button\n                class="btn btn-primary btn-view mx-auto"\n                data-car-id="${e.car_id}"\n                data-bs-toggle="modal"\n                data-bs-target="#car-info"\n              >\n                view\n              </button>\n            </td>\n          </tr>\n  `}#v(e,n){return`\n        <tr class="table-row"">\n            <td class="table-field">${n}</td>\n            <td class="table-field">${e.customer_id}</td>\n            <td class="table-field">${e.fname[0].toUpperCase()+e.fname.slice(1).toLowerCase()}</td>\n            <td class="table-field">${e.lname[0].toUpperCase()+e.lname.slice(1).toLowerCase()}</td>\n            <td class="table-field">${e.email.toLowerCase()}</td>\n            <td class="table-field">${e.region[0].toUpperCase()+e.region.slice(1).toLowerCase()}</td>\n            <td class="table-field">${e.phone_no}</td>\n            <td class="table-field">${e.license_no}</td>\n       \n            <td class="table-field">\n              <button\n                class="btn btn-primary btn-delete mx-auto"\n                data-customer-id="${e.customer_id}"\n              >\n                delete\n              </button>\n            </td>\n          </tr>`}#b(e,n){let t=e.brand;return t=t.split(" ").map((e=>e[0].toUpperCase()+e.slice(1).toLowerCase())).join(" "),t.length<4&&(t=t.toUpperCase()),`\n        <tr class="table-row"">\n            <td class="table-field">${n}</td>\n            <td class="table-field">${e.res_id}</td>\n            <td class="table-field">${e.car_id}</td>\n            <td class="table-field">${e.customer_id}</td>\n            <td class="table-field">${t}</td>\n            <td class="table-field">${e.model.toUpperCase()}</td>\n            <td class="table-field">${e.plate_no.toUpperCase()}</td>\n            <td class="table-field">${e.region}</td>\n            <td class="table-field">${e.rate}</td>\n            <td class="table-field">${e.pick_date.split("T")[0]}</td>\n            <td class="table-field">${e.drop_date.split("T")[0]}</td>\n            <td class="table-field">${e.date.split("T")[0]}</td>\n            <td class="table-field">${e.status[0].toUpperCase()+e.status.slice(1).toLowerCase()}</td>\n            <td class="table-field">${e.res_status[0].toUpperCase()+e.res_status.slice(1).toLowerCase()}</td>\n            <td class="table-field">\n              <button\n                class="btn btn-primary btn-view mx-auto"\n                data-car-id="${e.car_id}"\n                data-res-id="${e.res_id}"\n                data-cust-id="${e.customer_id}"\n                data-bs-toggle="modal"\n                data-bs-target="#car-info"\n              >\n                view\n              </button>\n            </td>\n          </tr>\n  `}#p(e,n){let t=e.brand;return t=t.split(" ").map((e=>e[0].toUpperCase()+e.slice(1).toLowerCase())).join(" "),t.length<4&&(t=t.toUpperCase()),`\n        <tr class="table-row"">\n            <td class="table-field">${n}</td>\n            <td class="table-field">${e.car_id}</td>\n            <td class="table-field">${t}</td>\n            <td class="table-field">${e.model.toUpperCase()}</td>\n            <td class="table-field">${e.plate_no.toUpperCase()}</td>\n            <td class="table-field">${e.type[0].toUpperCase()+e.type.slice(1).toLowerCase()}</td>\n            <td class="table-field">${e.year}</td>\n            <td class="table-field">${e.seating}</td>\n            <td class="table-field">${e.transmission[0].toUpperCase()+e.transmission.slice(1).toLowerCase()}</td>\n            <td class="table-field">${e.rate}</td>\n            <td class="table-field">${e.region}</td>\n            <td class="table-field">${e.powertrain[0].toUpperCase()+e.powertrain.slice(1).toLowerCase()}</td>\n            <td class="table-field">${e.color[0].toUpperCase()+e.color.slice(1).toLowerCase()}</td>\n            <td class="table-field">${e.status.length<4?e.status.toUpperCase():e.status[0].toUpperCase()+e.status.slice(1).toLowerCase()}</td>\n            <td class="table-field">\n              <button\n                class="btn btn-primary btn-view mx-auto"\n                data-car-id="${e.car_id}"\n                data-res-id="${e.res_id}"\n                data-cust-id="${e.customer_id}"\n                data-bs-toggle="modal"\n                data-bs-target="#car-info"\n              >\n                view\n              </button>\n            </td>\n          </tr>\n  `}#h(e,n){return`\n    <div class="field">\n                <div class="info-icon">\n                  <ion-icon name="construct"></ion-icon>\n                </div>\n                <div class="info-text">${n}</div>\n              </div>\n\n              <div class="field">\n                <div class="info-icon">\n                  <ion-icon name="speedometer"></ion-icon>\n                </div>\n                <div class="info-text">${e.model.toUpperCase()}</div>\n              </div>\n\n              <div class="field">\n                <div class="info-icon">\n                  <ion-icon name="calendar-number"></ion-icon>\n                </div>\n                <div class="info-text">${e.year}</div>\n              </div>\n\n              <div class="field">\n                <div class="info-icon">\n                  <ion-icon name="settings"></ion-icon>\n                </div>\n                <div class="info-text">${e.transmission[0].toUpperCase()+e.transmission.slice(1).toLowerCase()}</div>\n              </div>\n\n              <div class="field">\n                <div class="info-icon">\n                  <svg\n                    xmlns="http://www.w3.org/2000/svg"\n                    viewBox="0 0 24 24"\n                    fill="currentColor"\n                    class="w-6 h-6"\n                  >\n                    <path\n                      fill-rule="evenodd"\n                      d="M1.5 7.125c0-1.036.84-1.875 1.875-1.875h6c1.036 0 1.875.84 1.875 1.875v3.75c0 1.036-.84 1.875-1.875 1.875h-6A1.875 1.875 0 011.5 10.875v-3.75zm12 1.5c0-1.036.84-1.875 1.875-1.875h5.25c1.035 0 1.875.84 1.875 1.875v8.25c0 1.035-.84 1.875-1.875 1.875h-5.25a1.875 1.875 0 01-1.875-1.875v-8.25zM3 16.125c0-1.036.84-1.875 1.875-1.875h5.25c1.036 0 1.875.84 1.875 1.875v2.25c0 1.035-.84 1.875-1.875 1.875h-5.25A1.875 1.875 0 013 18.375v-2.25z"\n                      clip-rule="evenodd"\n                    />\n                  </svg>\n                </div>\n                <div class="info-text">${e.type[0].toUpperCase()+e.type.slice(1).toLowerCase()}</div>\n              </div>\n\n              <div class="field">\n                <div class="info-icon">\n                  <ion-icon name="flash"></ion-icon>\n                </div>\n                <div class="info-text">${e.powertrain[0].toUpperCase()+e.powertrain.slice(1).toLowerCase()}</div>\n              </div>\n\n              <div class="field">\n                <div class="info-icon">\n                  <ion-icon name="person"></ion-icon>\n                </div>\n                <div class="info-text">${e.seating}</div>\n              </div>\n\n              <div class="field">\n                <div class="info-icon">\n                  <ion-icon name="color-palette"></ion-icon>\n                </div>\n                <div class="info-text">${e.color[0].toUpperCase()+e.color.slice(1).toLowerCase()}</div>\n              </div>\n\n              <div class="field">\n                <div class="info-icon">\n                  <ion-icon name="logo-usd"></ion-icon>\n                </div>\n                <div class="info-text">${e.rate}<span class="car-rate">/d</span></div>\n              </div>\n             \n               <div class="field \n              ">\n                <div class="info-icon">\n                  <ion-icon name="car-sport"></ion-icon>\n                </div>\n                <div class="info-text">${e.plate_no}</div>\n              </div>\n\n              <div class="field \n              ">\n                <div class="info-icon">\n                  <ion-icon name="location-sharp"></ion-icon>\n                </div>\n                <div class="info-text">${e.region.length<4?e.region.toUpperCase():e.region[0].toUpperCase()+e.region.slice(1).toLowerCase()}</div>\n              </div>\n\n\n               ${"reserved"===e.status||"rented"===e.status?`\n                <div class="field">\n                  <div class="info-icon">\n                    <ion-icon name="calendar-number"></ion-icon>\n                  </div>\n                  <div class="info-text"><span class="text-sub">reserve date</span>${e.date.split("T")[0]}</div>\n                </div>\n\n                <div class="field info-date">\n                  <div class="info-icon me-3">\n                    <ion-icon name="calendar"></ion-icon>\n                  </div>\n                  <div class="info-text me-2"><span class="text-sub">pick-up date</span>${e.pick_date.split("T")[0]}</div>\n                  <div class="info-text"><span class="text-sub">drop-off date</span>${e.drop_date.split("T")[0]}</div>\n                </div>\n\n                <div class="field info-order">\n                  <div class="info-icon me-3">\n                    <ion-icon name="cube"></ion-icon>\n                  </div>\n                  <div class="info-text me-2"><span class="text-sub">reservation number</span>${e.res_id}</div>\n                </div>\n              `:""}\n\n              ${"reserved"===e.status||e.status,""}\n    `}#y(e,n){if("reservations"===n&&("active"===e.status||"oos"===e.status))return"";let t;return"reserved"===e.status&&(t="revoke"),"rented"===e.status&&(t="return"),"active"===e.status&&(t="suspend"),"oos"===e.status&&(t="activate"),t?`<button type="button"  class="btn btn-primary btn-${t}">${t}</button>`:""}#g(e){return`\n    <div class="carousel-item active">\n                  <img\n                    src="https://cdn.imagin.studio/getImage?customer=egalexu&target=make&make=${e.brand}&modelFamily=${e.model}&modelYear=${e.year}&paintId=imagin-${e.color}"\n                    class="d-block w-100"\n                    alt="..."\n                  />\n                </div>\n                <div class="carousel-item">\n                  <img\n                    src="https://cdn.imagin.studio/getImage?customer=egalexu&target=make&make=${e.brand}&modelFamily=${e.model}&modelYear=${e.year}&paintId=imagin-${e.color}&angle=09"\n                    class="d-block w-100"\n                    alt="..."\n                  />\n                </div>\n                <div class="carousel-item">\n                  <img\n                    src="https://cdn.imagin.studio/getImage?customer=egalexu&target=make&make=${e.brand}&modelFamily=${e.model}&modelYear=${e.year}&paintId=imagin-${e.color}&angle=22"\n                    class="d-block w-100"\n                    alt="..."\n                  />\n                </div>\n                <div class="carousel-item">\n                  <img\n                    src="https://cdn.imagin.studio/getImage?customer=egalexu&target=make&make=${e.brand}&modelFamily=${e.model}&modelYear=${e.year}&paintId=imagin-${e.color}&angle=23"\n                    class="d-block w-100"\n                    alt="..."\n                  />\n                </div>\n                <div class="carousel-item">\n                  <img\n                    src="https://cdn.imagin.studio/getImage?customer=egalexu&target=make&make=${e.brand}&modelFamily=${e.model}&modelYear=${e.year}&paintId=imagin-${e.color}&angle=13"\n                    class="d-block w-100"\n                    alt="..."\n                  />\n                </div>\n                <div class="carousel-item">\n                  <img\n                    src="https://cdn.imagin.studio/getImage?customer=egalexu&target=make&make=${e.brand}&modelFamily=${e.model}&modelYear=${e.year}&paintId=imagin-${e.color}&angle=29"\n                    class="d-block w-100"\n                    alt="..."\n                  />\n                </div>`}renderForm(){this.#l.classList.add("hide"),this.#i.innerHTML='\n     <div class="customer-title">\n            Enter car info <span class="text-sub">(case insensitive)</span>\n          </div>\n          <form class="car-form needs-validation" novalidate>\n            <div class="input-group">\n              <span class="input-group-text" id="brand-addon">Brand</span>\n              <input\n                type="text"\n                class="form-control"\n                placeholder="mercedes"\n                name="brand"\n                aria-describedby="brand-addon"\n                required\n              />\n              <div class="invalid-feedback">\n                Please provide a valid model name.\n              </div>\n            </div>\n\n            <div class="input-group">\n              <span class="input-group-text" id="model-addon">Model</span>\n              <input\n                type="text"\n                class="form-control"\n                placeholder="g-class"\n                name="model"\n                aria-describedby="model-addon"\n                required\n              />\n              <div class="invalid-feedback">\n                Please provide a valid model name.\n              </div>\n            </div>\n\n            <div class="input-group">\n              <span class="input-group-text" id="type-addon">Type</span>\n              <input\n                type="text"\n                class="form-control"\n                placeholder="sedan"\n                name="type"\n                aria-describedby="type-addon"\n                required\n              />\n              <div class="invalid-feedback">\n                Please provide a valid type name.\n              </div>\n            </div>\n\n            <div class="input-group">\n              <span class="input-group-text" id="model-addon">Color</span>\n              <input\n                type="text"\n                class="form-control"\n                placeholder="black"\n                name="color"\n                aria-describedby="model-addon"\n                required\n              />\n              <div class="invalid-feedback">\n                Please provide a valid color.\n              </div>\n            </div>\n\n            <div class="input-group">\n              <span class="input-group-text" id="plate-addon"\n                >Plate Number</span\n              >\n              <input\n                type="text"\n                class="form-control"\n                placeholder="5e4322"\n                name="plate_no"\n                aria-describedby="plate-addon"\n                required\n              />\n              <div class="invalid-feedback">\n                Please provide a valid plate number.\n              </div>\n            </div>\n\n            <div class="input-group">\n              <span class="input-group-text" id="year-addon"\n                >Manufacture Year</span\n              >\n              <input\n                type="number"\n                class="form-control"\n                placeholder="2020"\n                name="year"\n                aria-describedby="year-addon"\n                min="1965"\n                max="2023"\n                required\n              />\n              <div class="invalid-feedback">Please provide a valid year.</div>\n            </div>\n\n            <div class="input-group">\n              <span class="input-group-text" id="seating-addon">Seating</span>\n              <input\n                type="number"\n                class="form-control"\n                placeholder="2"\n                name="seating"\n                aria-describedby="seating-addon"\n                min="2"\n                max="14"\n                required\n              />\n              <div class="invalid-feedback">\n                Please provide a valid seating.\n              </div>\n            </div>\n\n            <div class="input-group">\n              <label class="input-group-text" for="transmission"\n                >Gear Transmission</label\n              >\n              <select class="form-select" name="transmission" required>\n                <option selected disabled value="">-</option>\n                <option value="automatic">Automatic</option>\n                <option value="manual">Manual</option>\n                <option value="cvt">CVT</option>\n              </select>\n\n              <div class="invalid-feedback">\n                Please choose a valid transmission.\n              </div>\n            </div>\n\n            <div class="input-group">\n              <span class="input-group-text" id="rate-addon">Rate/Day</span>\n              <input\n                type="number"\n                class="form-control rate"\n                placeholder="1200"\n                min = "0"\n                max ="8000"\n                name="rate"\n                aria-describedby="rate-addon"\n                required\n              />\n              <span class="input-group-text end-group">$</span>\n              <div class="invalid-feedback">Please provide a valid rate.</div>\n            </div>\n\n            <div class="input-group">\n              <span class="input-group-text" id="region-addon">Region</span>\n              <input\n                type="text"\n                class="form-control"\n                placeholder="egypt"\n                name="region"\n                aria-describedby="region-addon"\n                required\n              />\n              <div class="invalid-feedback">Please provide a valid region.</div>\n            </div>\n\n            <div class="input-group">\n              <span class="input-group-text" id="powertrain-addon">Powertrain</span>\n              <input\n                type="text"\n                class="form-control"\n                placeholder="fuel"\n                name="powertrain"\n                aria-describedby="powertrain-addon"\n                required\n              />\n              <div class="invalid-feedback">Please provide a valid powertrain.</div>\n            </div>\n\n            <button type="submit" class="btn btn-primary mt-5">submit</button>\n          </form>\n          <div class="add-footer mt-3">\n          Refer to this \n          <a target="_blank" href ="https://suite.imagin.studio/?&customer=egalexandria-university-faculty-of-engineering">link</a> for cars information\n          </div>\n          <div class="add-footer">\n          Note: Some cars may not have the chosen color in its image after adding due to lack of models\n          </div>\n    '}toggle(){this.#e.classList.toggle("hide"),this.#i.classList.toggle("hide")}};var o=new class{searchContainer=document.querySelector(".table-filter");renderReservationsSearch(){this.searchContainer.innerHTML='\n <div class="reservations-filter">\n            <div class="customer-title">\n              Search reservations by\n              <span class="text-sub">(case insensitive)</span>\n            </div>\n\n            <div class="input-group">\n              <span class="input-group-text" id="res-id">Reservation ID</span>\n              <input\n                type="text"\n                class="form-control"\n                id="res_id"\n                aria-describedby="res-id"\n                placeholder="12345"\n              />\n            </div>\n\n            <div class="input-group">\n              <span class="input-group-text" id="car-id">Car ID</span>\n              <input\n                type="text"\n                class="form-control"\n                id="car_id"\n                aria-describedby="car-id"\n                placeholder="12345"\n              />\n            </div>\n\n            <div class="input-group">\n              <span class="input-group-text" id="cust-id">Customer ID</span>\n              <input\n                type="text"\n                class="form-control"\n                id="customer_id"\n                aria-describedby="cust-id"\n                placeholder="12345"\n              />\n            </div>\n\n            <div class="input-group">\n              <span class="input-group-text" id="cust-name">Reservation status</span>\n              <input\n                type="text"\n                class="form-control"\n                id="res_status"\n                aria-describedby="cust-name"\n                placeholder="active"\n              />\n            </div>\n\n            <div class="input-group">\n              <span class="input-group-text" id="plate-id">Plate Number</span>\n              <input\n                type="text"\n                class="form-control"\n                id="plate_no"\n                aria-describedby="plate-id"\n                placeholder="5E4333"\n              />\n            </div>\n\n        \n\n            <div class="input-group">\n              <span class="input-group-text" id="pick-date">Pick-up Date</span>\n              <input\n                type="date"\n                class="form-control"\n                id="pick_date"\n                aria-describedby="pick-date"\n              />\n            </div>\n\n            <div class="input-group">\n              <span class="input-group-text" id="drop-date">Drop-off Date</span>\n              <input\n                type="date"\n                class="form-control"\n                id="drop_date"\n                aria-describedby="drop-date"\n              />\n            </div>\n\n            <div class="input-group">\n              <span class="input-group-text" id="range-date"\n                >Reservation Date</span\n              >\n              <input\n                type="date"\n                class="form-control"\n                id="date"\n                aria-describedby="res-date"\n              />\n            </div>\n\n            <div class="input-group range">\n              <span class="input-group-text" id="range-date"\n                >Reservation Date Range</span\n              >\n              <input\n                type="text"\n                class="form-control"\n                name="daterange"\n                id="range"\n                value=""\n                aria-describedby="range-date"\n              />\n            </div>\n\n    \n            <button\n              type="button"\n              class="btn btn-outline-primary btn-clear-search"\n            >\n              clear\n            </button>\n\n            <button type="button" class="btn btn-primary btn-search">\n              Search\n            </button>\n          </div>\n    '}renderCustomerSearch(){this.searchContainer.innerHTML='\n    <div class="customer-filter">\n            <div class="customer-title">\n              Search customers by\n              <span class="text-sub">(case insensitive)</span>\n            </div>\n\n            <div class="input-group ">\n              <span class="input-group-text" id="cust-id">ID</span>\n              <input\n                type="text"\n                class="form-control"\n                id="customer_id"\n                aria-describedby="cust-id"\n                placeholder="123456789"\n              />\n            </div>\n\n            <div class="input-group ">\n              <span class="input-group-text" id="first-name">First Name</span>\n              <input\n                type="text"\n                class="form-control"\n                id="fname"\n                aria-describedby="first-name"\n                placeholder="amr"\n              />\n            </div>\n\n            <div class="input-group ">\n              <span class="input-group-text" id="last-name">Last Name</span>\n              <input\n                type="text"\n                class="form-control"\n                id="lname"\n                aria-describedby="last-name"\n                placeholder="yasser"\n              />\n            </div>\n\n            <div class="input-group ">\n              <span class="input-group-text" id="mail">Email</span>\n              <input\n                type="text"\n                class="form-control"\n                id="email"\n                aria-describedby="mail"\n                placeholder="example@example.com"\n              />\n            </div>\n\n            <div class="input-group ">\n              <span class="input-group-text" id="country">Region</span>\n              <input\n                type="text"\n                class="form-control"\n                id="region"\n                aria-describedby="country"\n                placeholder="egypt"\n              />\n            </div>\n\n            <div class="input-group ">\n              <span class="input-group-text" id="phone">Phone Number</span>\n              <input\n                type="text"\n                class="form-control"\n                id="phone_no"\n                aria-describedby="phone"\n                placeholder="012-893-960-52"\n              />\n            </div>\n\n            <div class="input-group ">\n              <span class="input-group-text" id="license-no"\n                >License Number</span\n              >\n              <input\n                type="text"\n                class="form-control"\n                id="license_no"\n                aria-describedby="license-no"\n                placeholder="5e4322"\n              />\n            </div>\n\n\n            <button\n              type="button"\n              class="btn btn-outline-primary btn-clear-search"\n            >\n              clear\n            </button>\n\n            <button type="button" class="btn btn-primary btn-search">\n              Search\n            </button>\n          </div>\n    '}renderStatusSearch(){this.searchContainer.innerHTML='\n      <div class="status-filter">\n            <div class="customer-title">\n              Search status by day\n            </div>\n\n            <div class="input-group">\n              <span class="input-group-text" id="status">Date</span>\n              <input\n                type="date"\n                class="form-control"\n                id="status-date"\n                aria-describedby="status"\n              />\n            </div>\n    \n            <button\n              type="button"\n              class="btn btn-outline-primary btn-clear-search"\n            >\n              clear\n            </button>\n\n            <button type="button" class="btn btn-primary btn-search">\n              Search\n            </button>\n          </div>\n    '}renderPaymentsSearch(){this.searchContainer.innerHTML='\n      <div class="status-filter">\n            <div class="customer-title">\n              Search payments by period\n            </div>\n\n            <div class="input-group range">\n              <span class="input-group-text" id="range-date"\n                >Period</span\n              >\n              <input\n                type="text"\n                class="form-control date-period"\n                name="daterange"\n                id="range"\n                value=""\n                aria-describedby="range-date"\n              />\n            </div>\n    \n            <button\n              type="button"\n              class="btn btn-outline-primary btn-clear-search"\n            >\n              clear\n            </button>\n\n            <button type="button" class="btn btn-primary btn-search">\n              Search\n            </button>\n          </div>\n    '}renderCarSearch(){this.searchContainer.innerHTML='\n    <div class="car-filter">\n            <div class="car-filter-text">status</div>\n            <div class="form-check car-filter-btns">\n              <input\n                type="radio"\n                class="btn-check"\n                name="options-outlined"\n                id="all"\n                autocomplete="off"\n                checked\n              />\n              <label class="btn btn-outline-primary" for="all">All</label>\n              <input\n                type="radio"\n                class="btn-check"\n                name="options-outlined"\n                id="reserved"\n                autocomplete="off"\n              />\n              <label class="btn btn-outline-primary" for="reserved"\n                >reserved</label\n              >\n\n              <input\n                type="radio"\n                class="btn-check btn-car"\n                name="options-outlined"\n                id="rented"\n                autocomplete="off"\n              />\n              <label class="btn btn-outline-primary" for="rented">rented</label>\n\n               <input\n                type="radio"\n                class="btn-check btn-car"\n                name="options-outlined"\n                id="oos"\n                autocomplete="off"\n              />\n              <label class="btn btn-outline-primary" for="oos">out of service</label>\n            </div>\n          </div>\n          \n          <div class="car-search mt-4">\n            <div class="car-filter-text">\n              Search by <span class="text-sub">(case insensitive)</span>\n            </div>\n\n            <div class="input-group">\n             <span class="input-group-text" id="plate-no">Plate Number</span>\n              <input\n                type="test"\n                class="form-control plateNo"\n                placeholder="54E222"\n                id="plate_no"\n                aria-describedby="plate-no"\n              />\n            </div>\n    \n              <div class="input-group">\n             <span class="input-group-text" id="car-id">Car ID</span>\n              <input\n                type="test"\n                class="form-control plateNo"\n                placeholder="54E222"\n                id="car_id"\n                aria-describedby="car-id"\n              />\n            </div>\n\n            <div class="ms-5">\n            <button\n              type="button"\n              class="btn btn-outline-primary btn-clear-search"\n            >\n              clear\n            </button>\n\n            <button type="button" class="btn btn-primary btn-search">\n              Search\n            </button>\n          </div>\n          </div>\n          </div>\n          ',document.querySelectorAll(".btn-check").forEach((e=>{e.addEventListener("change",P.bind(e))}))}toggle(){this.searchContainer.classList.toggle("hide")}},d=a("7PUg4");let l,c,u,p,m,v,b,f="cars",g="all";const h=document.querySelector("#car-info"),y=document.querySelector(".alert");let C;const L=function(){document.querySelectorAll(".btn-view").forEach((e=>{const n=e.dataset.carId,t=e.dataset.resId,a=e.dataset.custId;e.addEventListener("click",(()=>{if("reservations"===f||"reserved"===g||"rented"===g?(u=k().find((e=>e.car_id===n&&e.res_id===t)),r.renderCarView(u,f)):(u=k().find((e=>e.car_id===n)),r.renderCarView(u,f)),"cars"===f||"reservations"===f){let e=document.querySelector(".btn-return");e&&e.addEventListener("click",V.bind(null,n,t,a)),e=document.querySelector(".btn-revoke"),e&&e.addEventListener("click",j.bind(null,n,t)),e=document.querySelector(".btn-suspend"),e&&e.addEventListener("click",Y.bind(null,n)),e=document.querySelector(".btn-activate"),e&&e.addEventListener("click",G.bind(null,n))}}))}))},w=function(){document.querySelectorAll(".btn-delete").forEach((e=>{const n=e.dataset.customerId;e.addEventListener("click",B.bind(null,n))})),p=document.querySelector(".customer-filter").querySelectorAll("input")},x=function(){$((function(){$('input[name="daterange"]').daterangepicker({opens:"left"},(function(e,n,t){}))}))},S=function(){p=document.querySelector(".car-search").querySelectorAll("input")},E=()=>{s.state.filters.forEach((e=>{i.default.renderFilter(e)})),i.default.addFiltersHandler()},k=()=>l&&"reservations"===f||v&&"reservations"===f?c:"cars"===f?v?c:"all"===g?s.state.cars:"reserved"===g?s.state.reserved.filter((e=>"reserved"===e.status)):"oos"===g?s.state.cars.filter((e=>"oos"===e.status)):s.state.rented.filter((e=>"rented"===e.status)):"customers"===f?s.state.users:"reservations"===f?s.state.reservations:"status"===f?s.state.daily:"payments"===f?s.state.payments:void 0,q=function(){l=!1;let e=[],n=!1;const t=k();let a;Object.entries(s.state.userFilters).forEach((a=>{const s=[];if("seating"===a[0]&&a[1]>1)return s.push(...t.filter((e=>e.seating===a[1]))),n?e=e.filter((e=>s.includes(e))):e.push(...s),void(n=!0);if("region"===a[0]&&a[1]&&"-"!=a[1])return s.push(...t.filter((e=>e.cca2===a[1].toUpperCase()))),n?e=e.filter((e=>s.includes(e))):e.push(...s),void(n=!0);if("range"===a[0]&&a[1].length>0){const i=a[1][0],r=a[1][1];return s.push(...t.filter((e=>+e.rate>=i&&+e.rate<=r))),n?e=e.filter((e=>s.includes(e))):e.push(...s),void(n=!0)}if("year"===a[0]&&a[1]>0)return s.push(...t.filter((e=>e.year===a[1]))),n?e=e.filter((e=>s.includes(e))):e.push(...s),void(n=!0);const i=a[1];i.length>0&&(i.forEach((e=>{s.push(...t.filter((n=>n[a[0]]===e)))})),n?e=e.filter((e=>s.includes(e))):e.push(...s),c=e,n=!0)})),a="cars"===f?d.CAR_HEAD:"status"===f?d.STATUS_HEAD:d.RESERVATIONS_HEAD,n?r.render(e,a,f):r.render(t,a,f),L(),e.length>0?D("Showing filter results"):D("No data found",!1),l=!0},T=function(){i.default.reset(),l=!1,s.state.userFilters={type:[],transmission:[],brand:[],powertrain:[],color:[],seating:1,region:"",range:[],year:0},document.querySelectorAll(".open").forEach((e=>{e.closest(".btn-filter").ariaExpanded=!1,e.closest(".filter").querySelector(".show").classList.remove("show"),e.classList.remove("open"),e.closest(".btn-filter").querySelector(".rotate").classList.remove("rotate")})),A(),L()},_=function(e){v=!1;const n=[...p].map((e=>{if(e.value)return{name:e.id,value:e.value}})).filter((e=>e)),t=n.findIndex((e=>"range"===e.name));if(t>-1){n[t].value.split("-")[0].trim()===n[t].value.split("-")[1].trim()&&n.splice(t,1)}if(!n.length)return void A();const a=[];k()?.forEach((e=>{let t=!0;e.pick_date&&(e.pick_date=e.pick_date.split("T")[0],e.drop_date=e.drop_date.split("T")[0],e.date=e.date.split("T")[0]),n.forEach((n=>{if("range"===n.name){const[a,s,i]=n.value.split("-")[0].trim().split("/"),[r,o,d]=n.value.split("-")[1].trim().split("/"),l=Date.parse(`${i}-${a}-${s}`),c=Date.parse(`${d}-${r}-${o}`),u=Date.parse(e.date.split("T")[0]);(u>c||u<l)&&(t=!1)}else`${e[n.name]}`.toLowerCase()!==`${n.value}`.toLowerCase()&&(t=!1)})),t&&a.push(e)})),r.render(a,e,f),L(),"customers"===f&&w(),c=a,a.length>0?D("Showing search results"):D("No data found",!1),v=!0},H=function(){v=!1,[...p].forEach((e=>e.value="")),document.querySelector(".btn-clear-search").blur(),A()},A=function(e){"cars"===f&&(r.render(k(),d.CAR_HEAD,f),S(),L(),l&&q(d.CAR_HEAD),v&&_()),"customers"===f&&(r.render(k(),d.CUSTOMER_HEAD,f),w(),v&&_()),"reservations"===f&&(r.render(k(),d.RESERVATIONS_HEAD,f),p=document.querySelector(".reservations-filter").querySelectorAll("input"),x(),L(),v&&_(d.RESERVATIONS_HEAD),l&&q(d.RESERVATIONS_HEAD)),"status"===f&&(r.render(k(),d.STATUS_HEAD,f),L()),"payments"===f&&(r.render(k(),d.PAYMENTS_HEAD,f),x()),"add"===f&&(r.renderForm(),U())},U=function(){const e=document.querySelector(".car-form");e.addEventListener("submit",(async n=>{if(n.preventDefault(),e.classList.add("was-validated"),!e.checkValidity())return;b=new FormData(e);const t={};[...b.entries()].forEach((e=>t[e[0]]=e[1]));if(await s.addCar(t)){D("Car added successfully"),await s.adminGetData();const e=await s.getCountries();return i.default.initUI(e),E(),f="cars",r.toggle(),o.toggle(),I(),O.call(document.querySelector('[data-action = "cars"]')),N(),void A()}D("Car addition failed",!1)}),!1)},M=function(e,n,t){const a=document.querySelector("#confirm-modal");a.querySelector(".modal-title").textContent=e,a.querySelector(".modal-body").textContent=n,document.querySelector(".confirm").innerHTML="",document.querySelector(".confirm").insertAdjacentHTML("afterbegin",' <button\n              type="button"\n              id="cancel"\n              class="btn btn-outline-primary cancel"\n              data-bs-dismiss="modal"\n              data-action=""\n            >\n              Cancel\n            </button>\n            <button\n              type="button"\n              id="confirm"\n              class="btn btn-primary"\n              data-action=""\n              data-bs-dismiss="modal"\n            >\n              Save changes\n            </button>'),document.querySelector("#confirm").textContent=t,C=new Promise(((e,n)=>{document.querySelector("#confirm").addEventListener("click",e),document.querySelector("#cancel").addEventListener("click",n),document.querySelector("#close-confirm").addEventListener("click",n)})),$("#confirm-modal").modal("show")},D=async function(e,n=!0){y.textContent=e,y.classList.toggle("alert-hide"),y.classList.toggle(""+(n?"alert-success":"alert-danger")),setTimeout((()=>{y.classList.toggle("alert-hide"),y.classList.toggle(""+(n?"alert-success":"alert-danger")),y.textContent=""}),3e3)},R=function(e){e.preventDefault(),H();const n=this.dataset.action;"add"===n&&"add"===f||(("customers"===f||"payments"===f)&&I(),"add"!==f&&"add"!==n||(r.toggle(),o.toggle(),I()),f=n,O.call(this),N(),A())},I=function(){m.forEach((e=>{e.disabled=!e.disabled,e.dataset.bsToggle?e.dataset.bsToggle="":e.dataset.bsToggle="collapse"})),T()},P=function(){g=this.id,A()},N=function(){"cars"===f&&(g="all",o.renderCarSearch(),document.querySelector(".btn-search").addEventListener("click",_.bind(null,d.CAR_HEAD)),document.querySelector(".btn-clear-search").addEventListener("click",H.bind())),"customers"===f&&(o.renderCustomerSearch(),document.querySelector(".btn-search").addEventListener("click",_.bind(null,d.CUSTOMER_HEAD)),document.querySelector(".btn-clear-search").addEventListener("click",H.bind()),I()),"reservations"===f&&(o.renderReservationsSearch(),document.querySelector(".btn-search").addEventListener("click",_.bind(null,d.RESERVATIONS_HEAD)),document.querySelector(".btn-clear-search").addEventListener("click",H)),"status"===f&&(o.renderStatusSearch(),document.querySelector(".btn-search").addEventListener("click",F),document.querySelector(".btn-clear-search").addEventListener("click",z)),"payments"===f&&(o.renderPaymentsSearch(),document.querySelector(".btn-search").addEventListener("click",F),document.querySelector(".btn-clear-search").addEventListener("click",z),I())},F=async function(){if("status"===f){const e=document.querySelector("#status-date").value;if(!e)return;await s.getStatus(e)}if("payments"===f){const e=document.querySelector("#range").value;if(!e)return;await s.adminGetPayments(e)}A()},z=function(){if("status"===f){const e=document.querySelector("#status-date");if(!e)return;e.value="",s.state.daily=[]}if("payments"===f){const e=document.querySelector("#range");if(!e)return;e.value="",s.state.payments=[]}A()},O=function(){document.querySelector(".active").classList.remove("active"),this.classList.add("active")},j=async function(e,n){h.classList.add("z-n"),M("confirm revoke","Do you want to confirm revoking this car?","confirm");let t=await C.then((e=>!0)).catch((e=>!1));t&&(t=await s.adminRevokeCar(e,n),$("#car-info").modal("hide"),t?(D("Car revoke was completed successfully"),A()):D("Car revoke failed",!1)),h.classList.remove("z-n")},V=async function(e,n,t){h.classList.add("z-n"),M("confirm return","Do you want to confirm returning this car?","confirm");let a=await C.then((e=>!0)).catch((e=>!1));a&&(a=await s.adminReturnCar(e,n,t),$("#car-info").modal("hide"),a?(D("Car return was completed successfully"),A()):D("Car return failed",!1)),h.classList.remove("z-n")},Y=async function(e){h.classList.add("z-n"),M("confirm revoke","Do you want to confirm suspending this car?","confirm");let n=await C.then((e=>!0)).catch((e=>!1));n&&(n=await s.suspendCar(e),$("#car-info").modal("hide"),n?(D("Car suspension was completed successfully"),A()):D("Car suspension failed",!1)),h.classList.remove("z-n")},G=async function(e){h.classList.add("z-n"),M("confirm revoke","Do you want to confirm activating this car?","confirm");let n=await C.then((e=>!0)).catch((e=>!1));n&&(n=await s.activateCar(e),$("#car-info").modal("hide"),n?(D("Car activation was completed successfully"),A()):D("Car activation failed",!1)),h.classList.remove("z-n")},B=async function(e){h.classList.add("z-n"),M("confirm revoke","Do you want to confirm deleting this customer?","confirm");let n=await C.then((e=>!0)).catch((e=>!1));n&&(n=await s.deleteCustomer(e),$("#car-info").modal("hide"),n?(D("Customer deletion was completed successfully"),A()):D("Customer deletion failed",!1)),h.classList.remove("z-n")};document.querySelector("footer").innerHTML=`\n      Copyrights &copy; ${(new Date).getFullYear()} Amr Yasser, Marwan Khaled, and Begad Wael\n`,(async()=>{const e=await s.getCountries();i.default.initUI(e),await s.adminGetData(),r.render(s.state.cars,d.CAR_HEAD,f),E(),document.querySelector(".btn-apply").addEventListener("click",q.bind()),document.querySelector(".btn-reset").addEventListener("click",T.bind()),m=document.querySelector(".sidebar-container").querySelectorAll("button"),document.querySelectorAll(".btn-nav").forEach((e=>e.addEventListener("click",R.bind(e)))),document.querySelector(".btn-signout").addEventListener("click",s.signOut.bind(null)),document.querySelector("#close-confirm").addEventListener("click",(()=>{$("#confirm-modal").modal("toggle")})),N(),S(),L()})();
//# sourceMappingURL=admin.de2ee1b3.js.map
